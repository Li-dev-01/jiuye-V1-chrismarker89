# è´¦æˆ·ç®¡ç†æ“ä½œåŠŸèƒ½å®ç°æ€»ç»“

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

å·²æˆåŠŸä¸ºè´¦æˆ·ç®¡ç†é¡µé¢æ·»åŠ ä»¥ä¸‹åŠŸèƒ½ï¼š

### âœ… å·²å®ç°åŠŸèƒ½

1. **é‚®ç®±çº§åˆ«æ“ä½œ**
   - âœ… åœç”¨/å¯ç”¨é‚®ç®±
   - âœ… åˆ é™¤é‚®ç®±åŠå…¶æ‰€æœ‰è§’è‰²è´¦å·

2. **è§’è‰²è´¦å·çº§åˆ«æ“ä½œ**
   - âœ… åœç”¨/å¯ç”¨è§’è‰²è´¦å·
   - âœ… åˆ é™¤å•ä¸ªè§’è‰²è´¦å·

## ğŸ¨ UIæ”¹è¿›

### ä¸»è¡¨æ ¼ï¼ˆé‚®ç®±åˆ—è¡¨ï¼‰

**æ“ä½œåˆ—å®½åº¦**ï¼š280px

**æŒ‰é’®å¸ƒå±€**ï¼š
```
[æ·»åŠ è§’è‰²] [åœç”¨/å¯ç”¨] [åˆ é™¤é‚®ç®±]
   è“è‰²      æ™®é€š       çº¢è‰²å±é™©
```

**åŠŸèƒ½è¯´æ˜**ï¼š
- **æ·»åŠ è§’è‰²**ï¼šä¸ºè¯¥é‚®ç®±æ·»åŠ æ–°çš„è§’è‰²è´¦å·
- **åœç”¨/å¯ç”¨**ï¼šåˆ‡æ¢é‚®ç®±çŠ¶æ€ï¼ˆå½±å“æ‰€æœ‰è§’è‰²è´¦å·ï¼‰
- **åˆ é™¤é‚®ç®±**ï¼šåˆ é™¤é‚®ç®±åŠå…¶æ‰€æœ‰è§’è‰²è´¦å·ï¼ˆå¸¦ç¡®è®¤å¯¹è¯æ¡†ï¼‰

### å±•å¼€è¡Œï¼ˆè§’è‰²è´¦å·è¯¦æƒ…ï¼‰

**æ“ä½œåˆ—å®½åº¦**ï¼š200px

**æŒ‰é’®å¸ƒå±€**ï¼š
```
[åœç”¨/å¯ç”¨] [åˆ é™¤]
   æ™®é€š      çº¢è‰²å±é™©
```

**åŠŸèƒ½è¯´æ˜**ï¼š
- **åœç”¨/å¯ç”¨**ï¼šåˆ‡æ¢å•ä¸ªè§’è‰²è´¦å·çŠ¶æ€
- **åˆ é™¤**ï¼šåˆ é™¤è¯¥è§’è‰²è´¦å·ï¼ˆå¸¦ç¡®è®¤å¯¹è¯æ¡†ï¼‰

## ğŸ”§ æŠ€æœ¯å®ç°

### æ–°å¢å‡½æ•°

#### 1. handleToggleEmailStatus
```typescript
const handleToggleEmailStatus = async (emailId: number, currentStatus: boolean) => {
  // åˆ‡æ¢é‚®ç®±çš„æ¿€æ´»çŠ¶æ€
  // API: PUT /api/admin/account-management/emails/{emailId}/toggle-status
}
```

#### 2. handleDeleteEmail
```typescript
const handleDeleteEmail = async (emailId: number, email: string) => {
  // åˆ é™¤é‚®ç®±åŠå…¶æ‰€æœ‰è§’è‰²è´¦å·
  // API: DELETE /api/admin/account-management/emails/{emailId}
}
```

#### 3. handleToggleAccountStatus
```typescript
const handleToggleAccountStatus = async (accountId: number, currentStatus: boolean) => {
  // åˆ‡æ¢è§’è‰²è´¦å·çš„æ¿€æ´»çŠ¶æ€
  // API: PUT /api/admin/account-management/accounts/{accountId}/toggle-status
}
```

#### 4. handleDeleteAccountï¼ˆä¼˜åŒ–ï¼‰
```typescript
const handleDeleteAccount = async (accountId: number) => {
  // åˆ é™¤å•ä¸ªè§’è‰²è´¦å·
  // API: DELETE /api/admin/account-management/accounts/{accountId}
}
```

## ğŸ“¡ APIæ¥å£

### 1. åœç”¨/å¯ç”¨é‚®ç®±
```
PUT /api/admin/account-management/emails/{emailId}/toggle-status
Headers: Authorization: Bearer {super_admin_token}
Content-Type: application/json
Body: {
  "isActive": true/false
}
```

### 2. åˆ é™¤é‚®ç®±
```
DELETE /api/admin/account-management/emails/{emailId}
Headers: Authorization: Bearer {super_admin_token}
```

### 3. åœç”¨/å¯ç”¨è§’è‰²è´¦å·
```
PUT /api/admin/account-management/accounts/{accountId}/toggle-status
Headers: Authorization: Bearer {super_admin_token}
Content-Type: application/json
Body: {
  "isActive": true/false
}
```

### 4. åˆ é™¤è§’è‰²è´¦å·
```
DELETE /api/admin/account-management/accounts/{accountId}
Headers: Authorization: Bearer {super_admin_token}
```

## ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. ç¡®è®¤å¯¹è¯æ¡†
æ‰€æœ‰åˆ é™¤æ“ä½œéƒ½æœ‰äºŒæ¬¡ç¡®è®¤ï¼š

**åˆ é™¤é‚®ç®±**ï¼š
- æ ‡é¢˜ï¼š`ç¡®å®šè¦åˆ é™¤é‚®ç®± {email} åŠå…¶æ‰€æœ‰è§’è‰²è´¦å·å—ï¼Ÿ`
- æè¿°ï¼š`æ­¤æ“ä½œä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œï¼`
- ç¡®è®¤æŒ‰é’®ï¼šçº¢è‰²å±é™©æŒ‰é’®

**åˆ é™¤è§’è‰²è´¦å·**ï¼š
- æ ‡é¢˜ï¼š`ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè§’è‰²è´¦å·å—ï¼Ÿ`
- æè¿°ï¼š`æ­¤æ“ä½œä¸å¯æ¢å¤ï¼`
- ç¡®è®¤æŒ‰é’®ï¼šçº¢è‰²å±é™©æŒ‰é’®

### 2. æ“ä½œåé¦ˆ
æ‰€æœ‰æ“ä½œéƒ½æœ‰æ˜ç¡®çš„æˆåŠŸ/å¤±è´¥æ¶ˆæ¯ï¼š
- âœ… `è´¦å·å·²åœç”¨`
- âœ… `è´¦å·å·²å¯ç”¨`
- âœ… `é‚®ç®±å·²åœç”¨`
- âœ… `é‚®ç®±å·²å¯ç”¨`
- âœ… `è§’è‰²è´¦å·åˆ é™¤æˆåŠŸ`
- âœ… `é‚®ç®± {email} åŠå…¶æ‰€æœ‰è§’è‰²è´¦å·å·²åˆ é™¤`
- âŒ `æ“ä½œå¤±è´¥`
- âŒ `åˆ é™¤è§’è‰²è´¦å·å¤±è´¥`
- âŒ `åˆ é™¤é‚®ç®±å¤±è´¥`

### 3. åŠ¨æ€æŒ‰é’®æ–‡æœ¬
æŒ‰é’®æ–‡æœ¬æ ¹æ®å½“å‰çŠ¶æ€åŠ¨æ€æ˜¾ç¤ºï¼š
- æ¿€æ´»çŠ¶æ€ â†’ æ˜¾ç¤º"åœç”¨"
- åœç”¨çŠ¶æ€ â†’ æ˜¾ç¤º"å¯ç”¨"

## ğŸ“‚ æ–‡ä»¶ä¿®æ”¹

### ä¿®æ”¹çš„æ–‡ä»¶
- `reviewer-admin-dashboard/src/pages/EmailRoleAccountManagement.tsx`

### ä¿®æ”¹å†…å®¹
1. æ–°å¢4ä¸ªæ“ä½œå‡½æ•°
2. æ›´æ–°ä¸»è¡¨æ ¼æ“ä½œåˆ—ï¼ˆæ·»åŠ åœç”¨/å¯ç”¨å’Œåˆ é™¤é‚®ç®±æŒ‰é’®ï¼‰
3. æ›´æ–°å±•å¼€è¡Œæ“ä½œåˆ—ï¼ˆæ·»åŠ åœç”¨/å¯ç”¨æŒ‰é’®ï¼‰
4. ä¼˜åŒ–ç¡®è®¤å¯¹è¯æ¡†çš„æç¤ºä¿¡æ¯

## ğŸ”’ å®‰å…¨è€ƒè™‘

1. **æƒé™éªŒè¯**ï¼šæ‰€æœ‰æ“ä½œéƒ½éœ€è¦è¶…çº§ç®¡ç†å‘˜token
2. **çº§è”åˆ é™¤**ï¼šåˆ é™¤é‚®ç®±æ—¶åº”çº§è”åˆ é™¤æ‰€æœ‰å…³è”çš„è§’è‰²è´¦å·
3. **çŠ¶æ€åŒæ­¥**ï¼šåœç”¨é‚®ç®±æ—¶ï¼Œåº”åŒæ—¶åœç”¨è¯¥é‚®ç®±ä¸‹çš„æ‰€æœ‰è§’è‰²è´¦å·
4. **æ“ä½œæ—¥å¿—**ï¼šå»ºè®®åç«¯è®°å½•æ‰€æœ‰åˆ é™¤å’ŒçŠ¶æ€å˜æ›´æ“ä½œ
5. **é˜²è¯¯åˆ **ï¼šæ‰€æœ‰åˆ é™¤æ“ä½œéƒ½æœ‰ç¡®è®¤å¯¹è¯æ¡†

## ğŸ§ª æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•
1. âœ… åœç”¨é‚®ç®± â†’ éªŒè¯è¯¥é‚®ç®±ä¸‹çš„æ‰€æœ‰è§’è‰²è´¦å·éƒ½æ— æ³•ç™»å½•
2. âœ… å¯ç”¨é‚®ç®± â†’ éªŒè¯è¯¥é‚®ç®±ä¸‹çš„è§’è‰²è´¦å·å¯ä»¥æ­£å¸¸ç™»å½•
3. âœ… åˆ é™¤é‚®ç®± â†’ éªŒè¯é‚®ç®±åŠå…¶æ‰€æœ‰è§’è‰²è´¦å·éƒ½è¢«åˆ é™¤
4. âœ… åœç”¨å•ä¸ªè§’è‰²è´¦å· â†’ éªŒè¯åªæœ‰è¯¥è§’è‰²è´¦å·æ— æ³•ç™»å½•
5. âœ… åˆ é™¤å•ä¸ªè§’è‰²è´¦å· â†’ éªŒè¯åªæœ‰è¯¥è§’è‰²è´¦å·è¢«åˆ é™¤

### è¾¹ç•Œæµ‹è¯•
1. åˆ é™¤æœ€åä¸€ä¸ªè§’è‰²è´¦å· â†’ é‚®ç®±åº”è¯¥ä¿ç•™
2. åˆ é™¤è¶…çº§ç®¡ç†å‘˜è´¦å· â†’ åº”è¯¥æœ‰é¢å¤–çš„å®‰å…¨æ£€æŸ¥
3. åœç”¨å½“å‰ç™»å½•çš„è´¦å· â†’ åº”è¯¥æç¤ºç”¨æˆ·

## ğŸŒ è®¿é—®åœ°å€

- **æœ¬åœ°å¼€å‘**ï¼šhttp://localhost:3000/admin/email-role-accounts
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šhttps://90d0884d.reviewer-admin-dashboard.pages.dev/admin/email-role-accounts

## ğŸ“ åç»­å·¥ä½œ

### åç«¯éœ€è¦å®ç°çš„API
1. âœ… `DELETE /api/admin/account-management/accounts/{accountId}` - å·²å­˜åœ¨
2. â³ `PUT /api/admin/account-management/emails/{emailId}/toggle-status` - éœ€è¦å®ç°
3. â³ `DELETE /api/admin/account-management/emails/{emailId}` - éœ€è¦å®ç°
4. â³ `PUT /api/admin/account-management/accounts/{accountId}/toggle-status` - éœ€è¦å®ç°

### å»ºè®®çš„åç«¯å®ç°é€»è¾‘

#### åœç”¨/å¯ç”¨é‚®ç®±
```sql
-- æ›´æ–°é‚®ç®±çŠ¶æ€
UPDATE email_whitelist 
SET is_active = ? 
WHERE id = ?;

-- åŒæ—¶æ›´æ–°è¯¥é‚®ç®±ä¸‹çš„æ‰€æœ‰è§’è‰²è´¦å·çŠ¶æ€
UPDATE role_accounts 
SET is_active = ? 
WHERE email = (SELECT email FROM email_whitelist WHERE id = ?);
```

#### åˆ é™¤é‚®ç®±
```sql
-- å…ˆåˆ é™¤æ‰€æœ‰è§’è‰²è´¦å·
DELETE FROM role_accounts 
WHERE email = (SELECT email FROM email_whitelist WHERE id = ?);

-- å†åˆ é™¤é‚®ç®±
DELETE FROM email_whitelist 
WHERE id = ?;
```

#### åœç”¨/å¯ç”¨è§’è‰²è´¦å·
```sql
UPDATE role_accounts 
SET is_active = ? 
WHERE id = ?;
```

## ğŸ‰ å®ŒæˆçŠ¶æ€

- âœ… å‰ç«¯UIå®ç°å®Œæˆ
- âœ… å‰ç«¯åŠŸèƒ½é€»è¾‘å®Œæˆ
- âœ… APIæ¥å£å®šä¹‰å®Œæˆ
- â³ åç«¯APIå®ç°ï¼ˆå¾…å®Œæˆï¼‰
- â³ é›†æˆæµ‹è¯•ï¼ˆå¾…å®Œæˆï¼‰
- â³ ç”Ÿäº§éƒ¨ç½²ï¼ˆå¾…å®Œæˆï¼‰

## ğŸ“¸ åŠŸèƒ½æˆªå›¾

è¯·æŸ¥çœ‹æµè§ˆå™¨ä¸­çš„å®é™…æ•ˆæœï¼š
- ä¸»è¡¨æ ¼æ“ä½œåˆ—ï¼š3ä¸ªæŒ‰é’®ï¼ˆæ·»åŠ è§’è‰²ã€åœç”¨/å¯ç”¨ã€åˆ é™¤é‚®ç®±ï¼‰
- å±•å¼€è¡Œæ“ä½œåˆ—ï¼š2ä¸ªæŒ‰é’®ï¼ˆåœç”¨/å¯ç”¨ã€åˆ é™¤ï¼‰
- ç¡®è®¤å¯¹è¯æ¡†ï¼šå¸¦æœ‰æ˜ç¡®çš„è­¦å‘Šä¿¡æ¯

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [è´¦æˆ·ç®¡ç†åŠŸèƒ½è¯´æ˜](./ACCOUNT_MANAGEMENT_FEATURES.md)
- [ä¿®å¤æ€»ç»“](./FIXES_SUMMARY.md)

