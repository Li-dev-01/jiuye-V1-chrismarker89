# æ•°æ®åº“æŠ€æœ¯æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
2. [å¤šçº§ä¸“ç”¨è¡¨ç³»ç»Ÿ](#å¤šçº§ä¸“ç”¨è¡¨ç³»ç»Ÿ)
3. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
4. [ç»´æŠ¤æŒ‡å—](#ç»´æŠ¤æŒ‡å—)
5. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
6. [ç›‘æ§ä¸å‘Šè­¦](#ç›‘æ§ä¸å‘Šè­¦)
7. [æ‰©å®¹ç­–ç•¥](#æ‰©å®¹ç­–ç•¥)
8. [APIå‚è€ƒ](#apiå‚è€ƒ)

---

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯åº”ç”¨å±‚                                â”‚
â”‚  React + TypeScript + Ant Design + Recharts               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 APIç½‘å…³å±‚                                   â”‚
â”‚  Cloudflare Workers + Hono Framework                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                å¤šçº§ä¸“ç”¨è¡¨ç³»ç»Ÿ                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Tier 1    â”‚  â”‚   Tier 2    â”‚  â”‚   Tier 3    â”‚         â”‚
â”‚  â”‚  ä¸»æ•°æ®è¡¨    â”‚  â”‚  ä¸šåŠ¡ä¸“ç”¨è¡¨  â”‚  â”‚  ç»Ÿè®¡ç¼“å­˜è¡¨  â”‚         â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚         â”‚
â”‚  â”‚ å†™ä¼˜åŒ–      â”‚  â”‚ åŠŸèƒ½åˆ†ç¦»    â”‚  â”‚ æŸ¥è¯¢ä¼˜åŒ–    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Tier 4    â”‚  â”‚  ç›‘æ§ç³»ç»Ÿ    â”‚  â”‚  æ™ºèƒ½æ‰©å®¹    â”‚         â”‚
â”‚  â”‚  è§†å›¾ç¼“å­˜è¡¨  â”‚  â”‚             â”‚  â”‚             â”‚         â”‚
â”‚  â”‚             â”‚  â”‚ æ€§èƒ½ç›‘æ§    â”‚  â”‚ åŠ¨æ€è°ƒä¼˜    â”‚         â”‚
â”‚  â”‚ æ˜¾ç¤ºä¼˜åŒ–    â”‚  â”‚ å®šæ—¶ä»»åŠ¡    â”‚  â”‚ è‡ªåŠ¨æ‰©å®¹    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Cloudflare D1 æ•°æ®åº“                        â”‚
â”‚  SQLite-compatible, Edge-distributed                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **è¯»å†™åˆ†ç¦»**: ä¸»è¡¨ä¸“æ³¨å†™å…¥ï¼Œä¸“ç”¨è¡¨ä¼˜åŒ–æŸ¥è¯¢
2. **å¤šçº§ç¼“å­˜**: 4å±‚ç¼“å­˜æ¶æ„ï¼Œé€çº§ä¼˜åŒ–æ€§èƒ½
3. **æ™ºèƒ½åŒæ­¥**: åŸºäºä½¿ç”¨æ¨¡å¼çš„åŠ¨æ€åŒæ­¥ç­–ç•¥
4. **è‡ªåŠ¨æ‰©å®¹**: æ ¹æ®æ•°æ®é‡å’Œæµé‡è‡ªåŠ¨è°ƒæ•´é…ç½®
5. **å®æ—¶ç›‘æ§**: å…¨æ–¹ä½æ€§èƒ½ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶

---

## ğŸ—„ï¸ å¤šçº§ä¸“ç”¨è¡¨ç³»ç»Ÿ

### Tier 1: ä¸»æ•°æ®è¡¨ (å†™ä¼˜åŒ–)

#### æ ¸å¿ƒè¡¨ç»“æ„

```sql
-- é€šç”¨é—®å·å“åº”è¡¨ (ä¸»è¡¨)
universal_questionnaire_responses
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ questionnaire_id (é—®å·ID)
â”œâ”€â”€ user_id (ç”¨æˆ·ID)
â”œâ”€â”€ response_data (JSONæ ¼å¼å“åº”æ•°æ®)
â”œâ”€â”€ is_complete (æ˜¯å¦å®Œæˆ)
â”œâ”€â”€ is_test_data (æ˜¯å¦æµ‹è¯•æ•°æ®)
â”œâ”€â”€ created_at (åˆ›å»ºæ—¶é—´)
â””â”€â”€ updated_at (æ›´æ–°æ—¶é—´)

-- ç”¨æˆ·è¡¨
users
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ username (ç”¨æˆ·å)
â”œâ”€â”€ email (é‚®ç®±)
â”œâ”€â”€ user_type (ç”¨æˆ·ç±»å‹)
â”œâ”€â”€ is_anonymous (æ˜¯å¦åŒ¿å)
â””â”€â”€ created_at (åˆ›å»ºæ—¶é—´)
```

**ç‰¹ç‚¹**:
- ä¸“æ³¨äºæ•°æ®å†™å…¥å’Œå®Œæ•´æ€§
- æœ€å°åŒ–å†™å…¥å»¶è¿Ÿ
- ä¿æŒæ•°æ®çš„åŸå§‹å®Œæ•´æ€§

### Tier 2: ä¸šåŠ¡ä¸“ç”¨è¡¨ (åŠŸèƒ½åˆ†ç¦»)

#### åˆ†æä¸“ç”¨è¡¨
```sql
analytics_responses
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ questionnaire_id
â”œâ”€â”€ user_id
â”œâ”€â”€ age_range (é¢„å¤„ç†å¹´é¾„æ®µ)
â”œâ”€â”€ education_level (é¢„å¤„ç†å­¦å†)
â”œâ”€â”€ employment_status (é¢„å¤„ç†å°±ä¸šçŠ¶æ€)
â”œâ”€â”€ gender (é¢„å¤„ç†æ€§åˆ«)
â”œâ”€â”€ major_category (é¢„å¤„ç†ä¸“ä¸šç±»åˆ«)
â”œâ”€â”€ salary_range (é¢„å¤„ç†è–ªèµ„èŒƒå›´)
â”œâ”€â”€ location (é¢„å¤„ç†åœ°åŒº)
â”œâ”€â”€ is_test_data
â””â”€â”€ created_at
```

#### ç®¡ç†ä¸“ç”¨è¡¨
```sql
admin_responses
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ response_id (å…³è”ä¸»è¡¨)
â”œâ”€â”€ review_status (å®¡æ ¸çŠ¶æ€)
â”œâ”€â”€ data_quality_score (æ•°æ®è´¨é‡è¯„åˆ†)
â”œâ”€â”€ anomaly_flags (å¼‚å¸¸æ ‡è®°)
â””â”€â”€ processed_at
```

#### ç¤¾ä¼šæ´å¯Ÿæ•°æ®è¡¨
```sql
social_insights_data
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ insight_type (æ´å¯Ÿç±»å‹)
â”œâ”€â”€ data_snapshot (æ•°æ®å¿«ç…§)
â”œâ”€â”€ generated_insights (ç”Ÿæˆçš„æ´å¯Ÿ)
â”œâ”€â”€ confidence_score (ç½®ä¿¡åº¦)
â””â”€â”€ created_at
```

### Tier 3: ç»Ÿè®¡ç¼“å­˜è¡¨ (æŸ¥è¯¢ä¼˜åŒ–)

#### å®æ—¶ç»Ÿè®¡è¡¨
```sql
realtime_stats
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ stat_key (ç»Ÿè®¡é”®)
â”œâ”€â”€ stat_category (ç»Ÿè®¡ç±»åˆ«)
â”œâ”€â”€ count_value (è®¡æ•°å€¼)
â”œâ”€â”€ percentage_value (ç™¾åˆ†æ¯”å€¼)
â”œâ”€â”€ time_window (æ—¶é—´çª—å£)
â””â”€â”€ last_updated
```

#### èšåˆç»Ÿè®¡è¡¨
```sql
aggregated_stats
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ aggregation_type (èšåˆç±»å‹)
â”œâ”€â”€ dimension (ç»´åº¦)
â”œâ”€â”€ metric_name (æŒ‡æ ‡åç§°)
â”œâ”€â”€ metric_value (æŒ‡æ ‡å€¼)
â”œâ”€â”€ period (ç»Ÿè®¡å‘¨æœŸ)
â””â”€â”€ calculated_at
```

### Tier 4: è§†å›¾ç¼“å­˜è¡¨ (æ˜¾ç¤ºä¼˜åŒ–)

#### ä»ªè¡¨æ¿ç¼“å­˜
```sql
dashboard_cache
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ cache_key (ç¼“å­˜é”®)
â”œâ”€â”€ widget_type (ç»„ä»¶ç±»å‹)
â”œâ”€â”€ widget_data (ç»„ä»¶æ•°æ®)
â”œâ”€â”€ expires_at (è¿‡æœŸæ—¶é—´)
â””â”€â”€ updated_at
```

#### å¯è§†åŒ–ç¼“å­˜
```sql
enhanced_visualization_cache
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ cache_key (ç¼“å­˜é”®)
â”œâ”€â”€ visualization_type (å¯è§†åŒ–ç±»å‹)
â”œâ”€â”€ page_context (é¡µé¢ä¸Šä¸‹æ–‡)
â”œâ”€â”€ chart_data (å›¾è¡¨æ•°æ®)
â”œâ”€â”€ expires_at (è¿‡æœŸæ—¶é—´)
â””â”€â”€ updated_at
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### åŒæ­¥ç­–ç•¥é…ç½®

| åŒæ­¥ä»»åŠ¡ | é¢‘ç‡ | ç›®æ ‡ | ä¼˜åŒ–é‡ç‚¹ |
|---------|------|------|----------|
| main_to_analytics | å®æ—¶ | æ•°æ®ä¸€è‡´æ€§ | å†™å…¥æ€§èƒ½ |
| analytics_to_realtime | 5åˆ†é’Ÿ | å®æ—¶ç»Ÿè®¡ | è®¡ç®—æ•ˆç‡ |
| realtime_to_aggregated | 10åˆ†é’Ÿ | èšåˆæ•°æ® | å­˜å‚¨ä¼˜åŒ– |
| aggregated_to_dashboard | 15åˆ†é’Ÿ | ä»ªè¡¨æ¿ | æ˜¾ç¤ºæ€§èƒ½ |
| dashboard_to_visualization | 15åˆ†é’Ÿ | å¯è§†åŒ– | æ¸²æŸ“ä¼˜åŒ– |

### ç´¢å¼•ç­–ç•¥

#### ä¸»è¦ç´¢å¼•
```sql
-- æ€§èƒ½å…³é”®ç´¢å¼•
CREATE INDEX idx_responses_questionnaire_created ON universal_questionnaire_responses(questionnaire_id, created_at);
CREATE INDEX idx_responses_user_complete ON universal_questionnaire_responses(user_id, is_complete);
CREATE INDEX idx_analytics_employment_age ON analytics_responses(employment_status, age_range);
CREATE INDEX idx_analytics_education_salary ON analytics_responses(education_level, salary_range);

-- ç»Ÿè®¡æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_realtime_stats_category_key ON realtime_stats(stat_category, stat_key);
CREATE INDEX idx_aggregated_stats_type_period ON aggregated_stats(aggregation_type, period);

-- ç¼“å­˜æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_dashboard_cache_key_expires ON dashboard_cache(cache_key, expires_at);
CREATE INDEX idx_visualization_cache_key_expires ON enhanced_visualization_cache(cache_key, expires_at);
```

### æŸ¥è¯¢ä¼˜åŒ–

#### ç»Ÿè®¡æŸ¥è¯¢ä¼˜åŒ–
```sql
-- ä¼˜åŒ–å‰ (ç›´æ¥æŸ¥è¯¢ä¸»è¡¨)
SELECT employment_status, COUNT(*) 
FROM universal_questionnaire_responses 
WHERE questionnaire_id = 'employment-survey-2024'
GROUP BY employment_status;

-- ä¼˜åŒ–å (ä½¿ç”¨ä¸“ç”¨è¡¨)
SELECT stat_key, count_value 
FROM realtime_stats 
WHERE stat_category = 'employment' 
AND time_window = '5min';
```

---

## ğŸ”§ ç»´æŠ¤æŒ‡å—

### æ—¥å¸¸ç»´æŠ¤ä»»åŠ¡

#### æ¯æ—¥ç»´æŠ¤ (è‡ªåŠ¨åŒ–)
```bash
# æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/consistency-check/employment-survey-2024"

# æ€§èƒ½æŒ‡æ ‡æ£€æŸ¥
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/performance/metrics?timeRange=24h"

# ç¼“å­˜å¥åº·åº¦æ£€æŸ¥
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/cache/usage-patterns?timeRange=24h"
```

#### æ¯å‘¨ç»´æŠ¤ (åŠè‡ªåŠ¨)
```bash
# æ€§èƒ½åŸºå‡†æ›´æ–°
curl -X POST "${API_BASE_URL}/api/universal-questionnaire/performance/baseline"

# æ‰©å®¹åˆ†æ
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/scaling/analysis"

# æ•°æ®è´¨é‡æŠ¥å‘Š
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/data-quality/employment-survey-2024"
```

#### æ¯æœˆç»´æŠ¤ (æ‰‹åŠ¨)
1. **æ•°æ®åº“ä¼˜åŒ–**
   ```sql
   ANALYZE; -- æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
   VACUUM; -- æ¸…ç†ç¢ç‰‡
   ```

2. **ç´¢å¼•ç»´æŠ¤**
   ```sql
   -- æ£€æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µ
   SELECT name, sql FROM sqlite_master WHERE type='index';
   
   -- é‡å»ºå¿…è¦ç´¢å¼•
   REINDEX idx_responses_questionnaire_created;
   ```

3. **å†å²æ•°æ®å½’æ¡£**
   ```sql
   -- å½’æ¡£6ä¸ªæœˆå‰çš„æ€§èƒ½æŒ‡æ ‡
   DELETE FROM performance_metrics 
   WHERE timestamp < datetime('now', '-6 months');
   ```

### æ•°æ®å¤‡ä»½ç­–ç•¥

#### è‡ªåŠ¨å¤‡ä»½
```bash
# æ¯æ—¥å¤‡ä»½ (Cloudflare D1 è‡ªåŠ¨)
wrangler d1 backup create college-employment-survey

# å¯¼å‡ºå…³é”®æ•°æ®
wrangler d1 execute college-employment-survey --command="
  SELECT * FROM analytics_responses 
  WHERE created_at >= datetime('now', '-1 day')
" --output backup_$(date +%Y%m%d).json
```

#### æ¢å¤æµç¨‹
```bash
# 1. åœæ­¢å†™å…¥æœåŠ¡
# 2. æ¢å¤æ•°æ®åº“
wrangler d1 backup restore college-employment-survey [backup-id]

# 3. éªŒè¯æ•°æ®å®Œæ•´æ€§
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/consistency-check/employment-survey-2024"

# 4. é‡å¯æœåŠ¡
```

---

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜è¯Šæ–­

#### 1. å“åº”æ—¶é—´è¿‡æ…¢
**ç—‡çŠ¶**: APIå“åº”æ—¶é—´ > 2ç§’
**è¯Šæ–­æ­¥éª¤**:
```sql
-- æ£€æŸ¥ç¼“å­˜å‘½ä¸­ç‡
SELECT 
  AVG(CASE WHEN cache_hit = 1 THEN 1.0 ELSE 0.0 END) * 100 as cache_hit_rate,
  AVG(response_time) as avg_response_time
FROM performance_metrics 
WHERE timestamp >= datetime('now', '-1 hour');

-- æ£€æŸ¥æ…¢æŸ¥è¯¢
SELECT endpoint, response_time, data_source, timestamp
FROM performance_metrics 
WHERE response_time > 2000 
ORDER BY response_time DESC 
LIMIT 10;
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç¼“å­˜é…ç½®
2. ä¼˜åŒ–åŒæ­¥é¢‘ç‡
3. é‡å»ºç´¢å¼•

#### 2. æ•°æ®ä¸ä¸€è‡´
**ç—‡çŠ¶**: ç»Ÿè®¡æ•°æ®ä¸å®é™…æ•°æ®ä¸ç¬¦
**è¯Šæ–­æ­¥éª¤**:
```sql
-- æ£€æŸ¥å„çº§è¡¨æ•°æ®é‡
SELECT 'main' as table_name, COUNT(*) as count 
FROM universal_questionnaire_responses 
WHERE questionnaire_id = 'employment-survey-2024'
UNION ALL
SELECT 'analytics', COUNT(*) 
FROM analytics_responses
UNION ALL
SELECT 'realtime_stats', COUNT(*) 
FROM realtime_stats 
WHERE stat_category = 'employment';
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ‰‹åŠ¨è§¦å‘åŒæ­¥
2. é‡æ–°è®¡ç®—ç»Ÿè®¡æ•°æ®
3. æ£€æŸ¥åŒæ­¥ä»»åŠ¡çŠ¶æ€

#### 3. ç¼“å­˜å¤±æ•ˆ
**ç—‡çŠ¶**: ç¼“å­˜å‘½ä¸­ç‡ < 80%
**è¯Šæ–­æ­¥éª¤**:
```sql
-- æ£€æŸ¥ç¼“å­˜çŠ¶æ€
SELECT cache_key, expires_at, updated_at
FROM enhanced_visualization_cache 
WHERE expires_at > datetime('now')
ORDER BY updated_at DESC;

-- æ£€æŸ¥åŒæ­¥ä»»åŠ¡çŠ¶æ€
SELECT * FROM v_cron_health 
WHERE health_status != 'healthy';
```

**è§£å†³æ–¹æ¡ˆ**:
1. è°ƒæ•´ç¼“å­˜è¿‡æœŸæ—¶é—´
2. ä¼˜åŒ–åŒæ­¥ç­–ç•¥
3. æ‰‹åŠ¨åˆ·æ–°ç¼“å­˜

### ç´§æ€¥æ¢å¤æµç¨‹

#### ç³»ç»Ÿå®Œå…¨æ•…éšœ
1. **ç«‹å³å“åº”** (5åˆ†é’Ÿå†…)
   - åˆ‡æ¢åˆ°å¤‡ç”¨æ•°æ®æº
   - å¯ç”¨é™çº§æ¨¡å¼
   - é€šçŸ¥ç›¸å…³äººå‘˜

2. **é—®é¢˜è¯Šæ–­** (15åˆ†é’Ÿå†…)
   - æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—
   - åˆ†æé”™è¯¯æ¨¡å¼
   - ç¡®å®šæ•…éšœèŒƒå›´

3. **ä¿®å¤å®æ–½** (30åˆ†é’Ÿå†…)
   - æ‰§è¡Œä¿®å¤æ–¹æ¡ˆ
   - éªŒè¯ä¿®å¤æ•ˆæœ
   - é€æ­¥æ¢å¤æœåŠ¡

4. **åç»­è·Ÿè¿›** (24å°æ—¶å†…)
   - å®Œæ•´æ€§æ£€æŸ¥
   - æ€§èƒ½éªŒè¯
   - æ•…éšœæ€»ç»“

---

## ğŸ“Š ç›‘æ§ä¸å‘Šè­¦

### å…³é”®æŒ‡æ ‡ç›‘æ§

#### æ€§èƒ½æŒ‡æ ‡
- **å“åº”æ—¶é—´**: å¹³å‡ < 500ms, P95 < 1000ms
- **ç¼“å­˜å‘½ä¸­ç‡**: > 90%
- **é”™è¯¯ç‡**: < 1%
- **å¹¶å‘ç”¨æˆ·æ•°**: å®æ—¶ç›‘æ§

#### ä¸šåŠ¡æŒ‡æ ‡
- **æ•°æ®å¢é•¿ç‡**: æ—¥/å‘¨/æœˆå¢é•¿è¶‹åŠ¿
- **ç”¨æˆ·æ´»è·ƒåº¦**: DAU/MAU
- **é—®å·å®Œæˆç‡**: > 95%
- **æ•°æ®è´¨é‡è¯„åˆ†**: > 85åˆ†

#### ç³»ç»ŸæŒ‡æ ‡
- **åŒæ­¥ä»»åŠ¡æˆåŠŸç‡**: > 98%
- **æ•°æ®ä¸€è‡´æ€§**: 100%
- **å­˜å‚¨ä½¿ç”¨ç‡**: < 80%
- **ç´¢å¼•æ•ˆç‡**: æŸ¥è¯¢ä¼˜åŒ–æ¯”ä¾‹

### å‘Šè­¦é…ç½®

#### å…³é”®å‘Šè­¦ (ç«‹å³é€šçŸ¥)
```yaml
critical_alerts:
  - name: "APIå“åº”æ—¶é—´è¿‡æ…¢"
    condition: "avg_response_time > 2000ms"
    duration: "5åˆ†é’Ÿ"
    
  - name: "ç¼“å­˜å‘½ä¸­ç‡è¿‡ä½"
    condition: "cache_hit_rate < 70%"
    duration: "10åˆ†é’Ÿ"
    
  - name: "æ•°æ®åŒæ­¥å¤±è´¥"
    condition: "sync_error_rate > 5%"
    duration: "1åˆ†é’Ÿ"
```

#### è­¦å‘Šå‘Šè­¦ (å»¶è¿Ÿé€šçŸ¥)
```yaml
warning_alerts:
  - name: "æ•°æ®å¢é•¿å¼‚å¸¸"
    condition: "daily_growth_rate > 50%"
    duration: "1å°æ—¶"
    
  - name: "ç”¨æˆ·å¹¶å‘è¿‡é«˜"
    condition: "concurrent_users > 1000"
    duration: "15åˆ†é’Ÿ"
```

---

## ğŸ”„ æ‰©å®¹ç­–ç•¥

### è‡ªåŠ¨æ‰©å®¹è§¦å‘æ¡ä»¶

#### æ•°æ®é‡æ‰©å®¹
- **è§¦å‘æ¡ä»¶**: æ—¥å¢é•¿ç‡ > 20%
- **æ‰©å®¹åŠ¨ä½œ**: 
  - å¢åŠ åŒæ­¥é¢‘ç‡
  - ä¼˜åŒ–ç´¢å¼•ç­–ç•¥
  - è°ƒæ•´ç¼“å­˜é…ç½®

#### æµé‡æ‰©å®¹
- **è§¦å‘æ¡ä»¶**: å³°å€¼æµé‡ > å¹³å‡æµé‡ 3å€
- **æ‰©å®¹åŠ¨ä½œ**:
  - å¯ç”¨æ™ºèƒ½é¢„çƒ­
  - å¢åŠ ç¼“å­˜å±‚çº§
  - ä¼˜åŒ–æŸ¥è¯¢è·¯ç”±

#### æ€§èƒ½æ‰©å®¹
- **è§¦å‘æ¡ä»¶**: å“åº”æ—¶é—´ > 1000ms
- **æ‰©å®¹åŠ¨ä½œ**:
  - èµ„æºé‡æ–°åˆ†é…
  - æŸ¥è¯¢ä¼˜åŒ–
  - ç¼“å­˜ç­–ç•¥è°ƒæ•´

### æ‰©å®¹å®æ–½æµç¨‹

1. **ç›‘æ§æ£€æµ‹** â†’ 2. **ç­–ç•¥åˆ†æ** â†’ 3. **è‡ªåŠ¨åº”ç”¨** â†’ 4. **æ•ˆæœéªŒè¯** â†’ 5. **å›æ»šå‡†å¤‡**

---

## ğŸ“š APIå‚è€ƒ

### æ ¸å¿ƒAPIç«¯ç‚¹

#### ç»Ÿè®¡æ•°æ®API
```http
GET /api/universal-questionnaire/statistics/{questionnaireId}
```

#### æ€§èƒ½ç›‘æ§API
```http
GET /api/universal-questionnaire/performance/metrics
GET /api/universal-questionnaire/performance/realtime
GET /api/universal-questionnaire/performance/baseline
```

#### ç¼“å­˜ç®¡ç†API
```http
GET /api/universal-questionnaire/cache/usage-patterns
GET /api/universal-questionnaire/cache/optimization-recommendations
POST /api/universal-questionnaire/cache/apply-optimizations
```

#### æ™ºèƒ½æ‰©å®¹API
```http
GET /api/universal-questionnaire/scaling/analysis
POST /api/universal-questionnaire/scaling/apply
GET /api/universal-questionnaire/scaling/history
```

#### å®šæ—¶ä»»åŠ¡API
```http
GET /api/universal-questionnaire/cron/status
GET /api/universal-questionnaire/cron/history/{pattern}
POST /api/universal-questionnaire/cron/trigger/{pattern}
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (2025-09-21)
- âœ… å®ç°å¤šçº§ä¸“ç”¨è¡¨æ¶æ„
- âœ… éƒ¨ç½²æ™ºèƒ½åŒæ­¥ç³»ç»Ÿ
- âœ… é›†æˆæ€§èƒ½ç›‘æ§
- âœ… æ·»åŠ è‡ªåŠ¨æ‰©å®¹æœºåˆ¶
- âœ… å®Œå–„ç›‘æ§å‘Šè­¦ä½“ç³»

### ä¸‹ä¸€ç‰ˆæœ¬è®¡åˆ’
- ğŸ”„ æœºå™¨å­¦ä¹ é©±åŠ¨çš„é¢„æµ‹æ‰©å®¹
- ğŸ”„ è·¨åœ°åŸŸæ•°æ®åŒæ­¥
- ğŸ”„ é«˜çº§æ•°æ®åˆ†æå¼•æ“
- ğŸ”„ å®æ—¶æµå¤„ç†èƒ½åŠ›

---

## ğŸ› ï¸ å¿«é€Ÿæ•…éšœæ’é™¤æŒ‡å—

### ä¸€é”®è¯Šæ–­å‘½ä»¤

```bash
# è¿è¡Œå®Œæ•´ç»´æŠ¤æ£€æŸ¥
cd backend && npx ts-node scripts/databaseMaintenance.ts

# æ£€æŸ¥APIå¥åº·çŠ¶æ€
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/performance/metrics?timeRange=1h"

# æ£€æŸ¥ç¼“å­˜çŠ¶æ€
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/cache/usage-patterns?timeRange=24h"

# æ£€æŸ¥åŒæ­¥ä»»åŠ¡
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/cron/status"
```

### å¸¸ç”¨ä¿®å¤å‘½ä»¤

```bash
# æ‰‹åŠ¨è§¦å‘æ•°æ®åŒæ­¥
curl -X POST "${API_BASE_URL}/api/universal-questionnaire/cron/trigger/*/5 * * * *"

# åº”ç”¨ç¼“å­˜ä¼˜åŒ–
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/cache/optimization-recommendations"

# æ™ºèƒ½æ‰©å®¹åˆ†æ
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/scaling/analysis"

# æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
curl -X GET "${API_BASE_URL}/api/universal-questionnaire/consistency-check/employment-survey-2024"
```

### ç´§æ€¥è”ç³»æ–¹å¼

- **æŠ€æœ¯è´Ÿè´£äºº**: [è”ç³»ä¿¡æ¯]
- **ç³»ç»Ÿç®¡ç†å‘˜**: [è”ç³»ä¿¡æ¯]
- **24å°æ—¶æ”¯æŒ**: [è”ç³»ä¿¡æ¯]

---

## ğŸ“‹ ç»´æŠ¤æ£€æŸ¥æ¸…å•

### æ¯æ—¥æ£€æŸ¥ âœ…
- [ ] APIå“åº”æ—¶é—´ < 500ms
- [ ] ç¼“å­˜å‘½ä¸­ç‡ > 90%
- [ ] é”™è¯¯ç‡ < 1%
- [ ] æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ­£å¸¸è¿è¡Œ
- [ ] æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥é€šè¿‡

### æ¯å‘¨æ£€æŸ¥ âœ…
- [ ] æ€§èƒ½åŸºå‡†æ›´æ–°
- [ ] æ‰©å®¹åˆ†ææŠ¥å‘Š
- [ ] æ•°æ®è´¨é‡è¯„ä¼°
- [ ] å­˜å‚¨ä½¿ç”¨ç‡æ£€æŸ¥
- [ ] ç´¢å¼•æ•ˆç‡åˆ†æ

### æ¯æœˆæ£€æŸ¥ âœ…
- [ ] æ•°æ®åº“ä¼˜åŒ– (ANALYZE, VACUUM)
- [ ] ç´¢å¼•é‡å»º
- [ ] å†å²æ•°æ®å½’æ¡£
- [ ] å¤‡ä»½éªŒè¯
- [ ] å®‰å…¨å®¡è®¡

---

**ğŸ“ æŠ€æœ¯æ”¯æŒ**: å¦‚æœ‰é—®é¢˜è¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ã€‚
