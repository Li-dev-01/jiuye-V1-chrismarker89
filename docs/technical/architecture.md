# ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

## ğŸ“‹ æ¶æ„æ¦‚è¿°

å¤§å­¦ç”Ÿå°±ä¸šé—®å·è°ƒæŸ¥å¹³å°é‡‡ç”¨ç°ä»£åŒ–çš„å‰åç«¯åˆ†ç¦»æ¶æ„ï¼ŒåŸºäºäº‘åŸç”ŸæŠ€æœ¯æ ˆæ„å»ºï¼Œç¡®ä¿é«˜æ€§èƒ½ã€é«˜å¯ç”¨æ€§å’Œè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

## ğŸ¯ è®¾è®¡åŸåˆ™

### æ ¸å¿ƒåŸåˆ™
- **æ¨¡å—åŒ–è®¾è®¡**: åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- **ç±»å‹å®‰å…¨**: å…¨æ ˆTypeScriptï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
- **æ€§èƒ½ä¼˜å…ˆ**: ä¼˜åŒ–åŠ è½½é€Ÿåº¦å’Œå“åº”æ—¶é—´
- **ç”¨æˆ·ä½“éªŒ**: ç›´è§‚çš„ç•Œé¢å’Œæµç•…çš„äº¤äº’
- **å®‰å…¨å¯é **: å¤šå±‚å®‰å…¨é˜²æŠ¤å’Œæ•°æ®ä¿æŠ¤

### æŠ€æœ¯é€‰å‹åŸåˆ™
- **æˆç†Ÿç¨³å®š**: é€‰æ‹©ç»è¿‡éªŒè¯çš„æŠ€æœ¯æ ˆ
- **å¼€å‘æ•ˆç‡**: æé«˜å¼€å‘å’Œç»´æŠ¤æ•ˆç‡
- **éƒ¨ç½²ç®€å•**: æ”¯æŒè‡ªåŠ¨åŒ–éƒ¨ç½²å’Œè¿ç»´
- **æˆæœ¬æ§åˆ¶**: åˆç†çš„æŠ€æœ¯æˆæœ¬

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·ç•Œé¢å±‚     â”‚    â”‚    ä¸šåŠ¡é€»è¾‘å±‚    â”‚    â”‚    æ•°æ®å­˜å‚¨å±‚    â”‚
â”‚  (Frontend)     â”‚    â”‚   (Backend)     â”‚    â”‚   (Database)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ React 18.3.1    â”‚    â”‚ Hono.js 4.5.8   â”‚    â”‚ Cloudflare D1   â”‚
â”‚ TypeScript 5.5  â”‚    â”‚ TypeScript 5.5  â”‚    â”‚ SQLite          â”‚
â”‚ Vite 5.4.3      â”‚    â”‚ Node.js 18+     â”‚    â”‚ MockDatabase    â”‚
â”‚ Ant Design 5.21 â”‚    â”‚ JWT Auth        â”‚    â”‚ (Development)   â”‚
â”‚ Tailwind CSS    â”‚    â”‚ RESTful API     â”‚    â”‚                 â”‚
â”‚ Zustand         â”‚    â”‚ Middleware      â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    éƒ¨ç½²å¹³å°     â”‚
                    â”‚  (Cloudflare)   â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ Pages (å‰ç«¯)    â”‚
                    â”‚ Workers (åç«¯)  â”‚
                    â”‚ D1 (æ•°æ®åº“)     â”‚
                    â”‚ R2 (å­˜å‚¨)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ å‰ç«¯æ¶æ„

### æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: React 18.3.1 + TypeScript 5.5.4
- **æ„å»ºå·¥å…·**: Vite 5.4.3
- **UIåº“**: Ant Design 5.21.4
- **æ ·å¼**: Tailwind CSS + CSS Modules
- **çŠ¶æ€ç®¡ç†**: Zustand
- **è·¯ç”±**: React Router v6
- **HTTPå®¢æˆ·ç«¯**: Axios
- **å›¾è¡¨åº“**: ECharts

### ç›®å½•ç»“æ„
```
frontend/src/
â”œâ”€â”€ ğŸ“ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ common/            # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ forms/             # è¡¨å•ç»„ä»¶
â”‚   â”œâ”€â”€ charts/            # å›¾è¡¨ç»„ä»¶
â”‚   â””â”€â”€ layout/            # å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ ğŸ“ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ questionnaire/     # é—®å·é¡µé¢
â”‚   â”œâ”€â”€ admin/             # ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ auth/              # è®¤è¯é¡µé¢
â”‚   â””â”€â”€ analytics/         # åˆ†æé¡µé¢
â”œâ”€â”€ ğŸ“ services/           # APIæœåŠ¡
â”‚   â”œâ”€â”€ api.ts             # APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯æœåŠ¡
â”‚   â””â”€â”€ questionnaire.ts   # é—®å·æœåŠ¡
â”œâ”€â”€ ğŸ“ stores/             # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ authStore.ts       # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ questionnaireStore.ts # é—®å·çŠ¶æ€
â”‚   â””â”€â”€ uiStore.ts         # UIçŠ¶æ€
â”œâ”€â”€ ğŸ“ types/              # TypeScriptç±»å‹
â”‚   â”œâ”€â”€ api.ts             # APIç±»å‹
â”‚   â”œâ”€â”€ questionnaire.ts   # é—®å·ç±»å‹
â”‚   â””â”€â”€ user.ts            # ç”¨æˆ·ç±»å‹
â”œâ”€â”€ ğŸ“ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ validation.ts      # éªŒè¯å·¥å…·
â”‚   â”œâ”€â”€ format.ts          # æ ¼å¼åŒ–å·¥å…·
â”‚   â””â”€â”€ constants.ts       # å¸¸é‡å®šä¹‰
â””â”€â”€ ğŸ“ assets/             # é™æ€èµ„æº
    â”œâ”€â”€ images/            # å›¾ç‰‡èµ„æº
    â”œâ”€â”€ icons/             # å›¾æ ‡èµ„æº
    â””â”€â”€ styles/            # æ ·å¼æ–‡ä»¶
```

### ç»„ä»¶æ¶æ„
```
App
â”œâ”€â”€ Router
â”‚   â”œâ”€â”€ PublicRoutes
â”‚   â”‚   â”œâ”€â”€ HomePage
â”‚   â”‚   â”œâ”€â”€ QuestionnairePage
â”‚   â”‚   â”œâ”€â”€ StoriesPage
â”‚   â”‚   â””â”€â”€ VoicesPage
â”‚   â”œâ”€â”€ AuthRoutes
â”‚   â”‚   â”œâ”€â”€ LoginPage
â”‚   â”‚   â””â”€â”€ RegisterPage
â”‚   â””â”€â”€ ProtectedRoutes
â”‚       â”œâ”€â”€ AdminDashboard
â”‚       â”œâ”€â”€ DataAnalytics
â”‚       â””â”€â”€ UserManagement
â”œâ”€â”€ Layout
â”‚   â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ Navigation
â”‚   â”œâ”€â”€ Sidebar
â”‚   â””â”€â”€ Footer
â””â”€â”€ Providers
    â”œâ”€â”€ AuthProvider
    â”œâ”€â”€ ThemeProvider
    â””â”€â”€ ErrorBoundary
```

## âš™ï¸ åç«¯æ¶æ„

### æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Hono.js 4.5.8
- **è¿è¡Œæ—¶**: Node.js 18+ (å¼€å‘) / Cloudflare Workers (ç”Ÿäº§)
- **è¯­è¨€**: TypeScript 5.5.4
- **æ•°æ®åº“**: MockDatabase (å¼€å‘) / Cloudflare D1 (ç”Ÿäº§)
- **è®¤è¯**: JWT Token
- **APIè§„èŒƒ**: RESTful

### ç›®å½•ç»“æ„
```
backend/src/
â”œâ”€â”€ ğŸ“ routes/             # APIè·¯ç”±
â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯è·¯ç”±
â”‚   â”œâ”€â”€ questionnaire.ts   # é—®å·è·¯ç”±
â”‚   â”œâ”€â”€ universal-questionnaire.ts # é€šç”¨é—®å·è·¯ç”±
â”‚   â”œâ”€â”€ admin.ts           # ç®¡ç†è·¯ç”±
â”‚   â””â”€â”€ analytics.ts       # åˆ†æè·¯ç”±
â”œâ”€â”€ ğŸ“ middleware/         # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ cors.ts            # CORSä¸­é—´ä»¶
â”‚   â”œâ”€â”€ validation.ts      # éªŒè¯ä¸­é—´ä»¶
â”‚   â””â”€â”€ error.ts           # é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”œâ”€â”€ ğŸ“ db/                 # æ•°æ®åº“æœåŠ¡
â”‚   â”œâ”€â”€ index.ts           # æ•°æ®åº“æœåŠ¡
â”‚   â”œâ”€â”€ schema.ts          # æ•°æ®åº“æ¨¡å¼
â”‚   â””â”€â”€ migrations/        # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ ğŸ“ services/           # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ authService.ts     # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ questionnaireService.ts # é—®å·æœåŠ¡
â”‚   â””â”€â”€ analyticsService.ts # åˆ†ææœåŠ¡
â”œâ”€â”€ ğŸ“ types/              # TypeScriptç±»å‹
â”‚   â”œâ”€â”€ api.ts             # APIç±»å‹
â”‚   â”œâ”€â”€ database.ts        # æ•°æ®åº“ç±»å‹
â”‚   â””â”€â”€ auth.ts            # è®¤è¯ç±»å‹
â”œâ”€â”€ ğŸ“ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ jwt.ts             # JWTå·¥å…·
â”‚   â”œâ”€â”€ validation.ts      # éªŒè¯å·¥å…·
â”‚   â””â”€â”€ crypto.ts          # åŠ å¯†å·¥å…·
â””â”€â”€ index.ts               # åº”ç”¨å…¥å£
```

### APIæ¶æ„
```
Hono App
â”œâ”€â”€ Global Middleware
â”‚   â”œâ”€â”€ CORS
â”‚   â”œâ”€â”€ Logger
â”‚   â”œâ”€â”€ Error Handler
â”‚   â””â”€â”€ Rate Limiter
â”œâ”€â”€ Public Routes
â”‚   â”œâ”€â”€ /api/health
â”‚   â”œâ”€â”€ /api/auth/login
â”‚   â”œâ”€â”€ /api/auth/register
â”‚   â””â”€â”€ /api/universal-questionnaire/*
â”œâ”€â”€ Protected Routes
â”‚   â”œâ”€â”€ /api/auth/profile
â”‚   â”œâ”€â”€ /api/questionnaire/*
â”‚   â”œâ”€â”€ /api/admin/*
â”‚   â””â”€â”€ /api/analytics/*
â””â”€â”€ Route Handlers
    â”œâ”€â”€ Request Validation
    â”œâ”€â”€ Business Logic
    â”œâ”€â”€ Database Operations
    â””â”€â”€ Response Formatting
```

## ğŸ’¾ æ•°æ®æ¶æ„

### æ•°æ®åº“è®¾è®¡
```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
  id INTEGER PRIMARY KEY,
  username TEXT UNIQUE,
  email TEXT UNIQUE,
  password_hash TEXT,
  role TEXT DEFAULT 'user',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- é€šç”¨é—®å·å“åº”è¡¨
CREATE TABLE universal_questionnaire_responses (
  id INTEGER PRIMARY KEY,
  questionnaire_id TEXT NOT NULL,
  user_id INTEGER,
  response_data TEXT NOT NULL, -- JSONæ ¼å¼
  submitted_at DATETIME NOT NULL,
  ip_address TEXT,
  user_agent TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- å®¡æ ¸è®°å½•è¡¨
CREATE TABLE reviews (
  id INTEGER PRIMARY KEY,
  content_type TEXT NOT NULL,
  content_id INTEGER NOT NULL,
  reviewer_id INTEGER NOT NULL,
  status TEXT DEFAULT 'pending',
  comments TEXT,
  reviewed_at DATETIME,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### æ•°æ®æµæ¶æ„
```
ç”¨æˆ·è¾“å…¥ â†’ å‰ç«¯éªŒè¯ â†’ APIè¯·æ±‚ â†’ åç«¯éªŒè¯ â†’ æ•°æ®åº“å­˜å‚¨
    â†“           â†“          â†“          â†“          â†“
  è¡¨å•ç»„ä»¶   Joi/Zod   ä¸­é—´ä»¶éªŒè¯  ä¸šåŠ¡é€»è¾‘   SQLæ“ä½œ
    â†“           â†“          â†“          â†“          â†“
  å®æ—¶åé¦ˆ   é”™è¯¯æç¤º   HTTPçŠ¶æ€ç   æ•°æ®è½¬æ¢   äº‹åŠ¡å¤„ç†
```

## ğŸ” å®‰å…¨æ¶æ„

### è®¤è¯æˆæƒ
```
ç”¨æˆ·è¯·æ±‚ â†’ JWTéªŒè¯ â†’ æƒé™æ£€æŸ¥ â†’ èµ„æºè®¿é—®
    â†“         â†“         â†“         â†“
  Token    è§£æéªŒè¯   è§’è‰²åŒ¹é…   APIå“åº”
    â†“         â†“         â†“         â†“
  åˆ·æ–°æœºåˆ¶  è¿‡æœŸå¤„ç†   æƒé™æ‹’ç»   å®‰å…¨æ—¥å¿—
```

### å®‰å…¨æªæ–½
- **JWT Token**: æ— çŠ¶æ€è®¤è¯
- **HTTPS**: ä¼ è¾“åŠ å¯†
- **CORS**: è·¨åŸŸä¿æŠ¤
- **Rate Limiting**: é˜²æ­¢æ»¥ç”¨
- **Input Validation**: è¾“å…¥éªŒè¯
- **SQL Injection**: å‚æ•°åŒ–æŸ¥è¯¢
- **XSS Protection**: å†…å®¹è½¬ä¹‰

## ğŸš€ éƒ¨ç½²æ¶æ„

### Cloudflareå¹³å°
```
ç”¨æˆ·è¯·æ±‚ â†’ Cloudflare CDN â†’ Pages/Workers â†’ D1æ•°æ®åº“
    â†“           â†“              â†“           â†“
  å…¨çƒåŠ é€Ÿ   è¾¹ç¼˜ç¼“å­˜      æ— æœåŠ¡å™¨è®¡ç®—   åˆ†å¸ƒå¼æ•°æ®åº“
    â†“           â†“              â†“           â†“
  DDoSé˜²æŠ¤   é™æ€èµ„æºä¼˜åŒ–   è‡ªåŠ¨æ‰©ç¼©å®¹   æ•°æ®åŒæ­¥
```

### ç¯å¢ƒé…ç½®
- **å¼€å‘ç¯å¢ƒ**: æœ¬åœ°Node.js + MockDatabase
- **æµ‹è¯•ç¯å¢ƒ**: Cloudflare Workers + D1 Staging
- **ç”Ÿäº§ç¯å¢ƒ**: Cloudflare Workers + D1 Production

## ğŸ“Š æ€§èƒ½æ¶æ„

### å‰ç«¯æ€§èƒ½ä¼˜åŒ–
- **ä»£ç åˆ†å‰²**: æŒ‰è·¯ç”±å’Œç»„ä»¶åˆ†å‰²
- **æ‡’åŠ è½½**: å›¾ç‰‡å’Œç»„ä»¶æ‡’åŠ è½½
- **ç¼“å­˜ç­–ç•¥**: æµè§ˆå™¨ç¼“å­˜å’ŒCDNç¼“å­˜
- **å‹ç¼©ä¼˜åŒ–**: Gzip/Brotliå‹ç¼©
- **Tree Shaking**: ç§»é™¤æœªä½¿ç”¨ä»£ç 

### åç«¯æ€§èƒ½ä¼˜åŒ–
- **æ•°æ®åº“ç´¢å¼•**: å…³é”®å­—æ®µç´¢å¼•
- **æŸ¥è¯¢ä¼˜åŒ–**: SQLæŸ¥è¯¢ä¼˜åŒ–
- **ç¼“å­˜æœºåˆ¶**: Redisç¼“å­˜
- **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥æ± 
- **å¼‚æ­¥å¤„ç†**: éé˜»å¡I/O

## ğŸ” ç›‘æ§æ¶æ„

### ç›‘æ§æŒ‡æ ‡
- **æ€§èƒ½æŒ‡æ ‡**: å“åº”æ—¶é—´ã€ååé‡ã€é”™è¯¯ç‡
- **ä¸šåŠ¡æŒ‡æ ‡**: ç”¨æˆ·æ´»è·ƒåº¦ã€é—®å·å®Œæˆç‡
- **ç³»ç»ŸæŒ‡æ ‡**: CPUã€å†…å­˜ã€ç½‘ç»œä½¿ç”¨ç‡
- **å®‰å…¨æŒ‡æ ‡**: å¼‚å¸¸è®¿é—®ã€æ”»å‡»å°è¯•

### ç›‘æ§å·¥å…·
- **Cloudflare Analytics**: æµé‡å’Œæ€§èƒ½ç›‘æ§
- **Sentry**: é”™è¯¯è¿½è¸ªå’Œæ€§èƒ½ç›‘æ§
- **Google Analytics**: ç”¨æˆ·è¡Œä¸ºåˆ†æ
- **Custom Metrics**: è‡ªå®šä¹‰ä¸šåŠ¡æŒ‡æ ‡

## ğŸ”„ æ‰©å±•æ¶æ„

### æ°´å¹³æ‰©å±•
- **å¾®æœåŠ¡åŒ–**: æŒ‰ä¸šåŠ¡åŸŸæ‹†åˆ†æœåŠ¡
- **è´Ÿè½½å‡è¡¡**: å¤šå®ä¾‹è´Ÿè½½åˆ†å‘
- **æ•°æ®åˆ†ç‰‡**: æ•°æ®åº“æ°´å¹³åˆ†ç‰‡
- **ç¼“å­˜é›†ç¾¤**: åˆ†å¸ƒå¼ç¼“å­˜

### å‚ç›´æ‰©å±•
- **æ€§èƒ½ä¼˜åŒ–**: ç®—æ³•å’Œæ•°æ®ç»“æ„ä¼˜åŒ–
- **èµ„æºå‡çº§**: å¢åŠ è®¡ç®—å’Œå­˜å‚¨èµ„æº
- **æ¶æ„ä¼˜åŒ–**: å‡å°‘ç½‘ç»œè°ƒç”¨å’Œæ•°æ®ä¼ è¾“

---

**ğŸ“… æœ€åæ›´æ–°**: 2025å¹´7æœˆ31æ—¥  
**ğŸ”„ ç»´æŠ¤äººå‘˜**: æ¶æ„å›¢é˜Ÿ  
**ğŸ“Š ç‰ˆæœ¬**: v1.0.0  
**ğŸ“š ç›¸å…³æ–‡æ¡£**: [éƒ¨ç½²æŒ‡å—](../deployment/README.md) | [APIæ–‡æ¡£](./api-specification.md)
