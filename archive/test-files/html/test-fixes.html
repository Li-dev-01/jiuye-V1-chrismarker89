<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éªŒè¯ä¿®å¤æ•ˆæœ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #1890ff;
        }
        .button {
            background: #1890ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background: #40a9ff;
        }
        .success {
            color: #52c41a;
            font-weight: bold;
        }
        .error {
            color: #ff4d4f;
            font-weight: bold;
        }
        .info {
            color: #1890ff;
        }
        .checklist {
            list-style-type: none;
            padding: 0;
        }
        .checklist li {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .checklist li:before {
            content: "â˜ ";
            margin-right: 8px;
        }
        .checklist li.checked:before {
            content: "âœ… ";
        }
        .output {
            background: #f6f6f6;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ç¬¬äºŒé—®å·ä¿®å¤éªŒè¯</h1>
        
        <div class="test-section">
            <h3>ğŸ¯ ä¿®å¤å†…å®¹</h3>
            <ul>
                <li><strong>ä¿®å¤1</strong>ï¼šç§»é™¤æœ€åçš„"æäº¤æ–¹å¼é€‰æ‹©"ï¼Œç›´æ¥è§¦å‘é˜²åˆ·éªŒè¯</li>
                <li><strong>ä¿®å¤2</strong>ï¼šä¿®å¤å¤šé€‰é¢˜é€‰æ‹©ä¸€ä¸ªé€‰é¡¹åè‡ªåŠ¨è·³è½¬çš„é—®é¢˜</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>ğŸ§ª æµ‹è¯•æ­¥éª¤</h3>
            <button class="button" onclick="openQuestionnaire()">1. æ‰“å¼€é—®å·é¡µé¢</button>
            <button class="button" onclick="startTest()">2. å¼€å§‹éªŒè¯æµ‹è¯•</button>
            
            <div id="output" class="output">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ“‹ æ‰‹åŠ¨éªŒè¯æ¸…å•</h3>
            <ul class="checklist" id="checklist">
                <li id="check1">å•é€‰é¢˜ï¼šé€‰æ‹©é€‰é¡¹åè‡ªåŠ¨è·³è½¬åˆ°ä¸‹ä¸€é¢˜</li>
                <li id="check2">å¤šé€‰é¢˜ï¼šé€‰æ‹©é€‰é¡¹åä¸è‡ªåŠ¨è·³è½¬ï¼Œæ˜¾ç¤º"ä¸‹ä¸€é¢˜"æŒ‰é’®</li>
                <li id="check3">å¤šé€‰é¢˜ï¼šå¯ä»¥é€‰æ‹©å¤šä¸ªé€‰é¡¹</li>
                <li id="check4">å¤šé€‰é¢˜ï¼šç‚¹å‡»"ä¸‹ä¸€é¢˜"æŒ‰é’®æ‰è·³è½¬</li>
                <li id="check5">æœ€åä¸€é¢˜ï¼šå®Œæˆåç›´æ¥æ˜¾ç¤ºé˜²åˆ·éªŒè¯å¼¹çª—</li>
                <li id="check6">é˜²åˆ·éªŒè¯ï¼šä¸æ˜¾ç¤º"æäº¤æ–¹å¼é€‰æ‹©"é¡µé¢</li>
                <li id="check7">é˜²åˆ·éªŒè¯ï¼šé€‰æ‹©æ­£ç¡®æ•°å­—åæˆåŠŸæäº¤</li>
            </ul>
            
            <div style="margin-top: 20px;">
                <button class="button" onclick="markChecked('check1')">âœ“ å•é€‰é¢˜æµ‹è¯•é€šè¿‡</button>
                <button class="button" onclick="markChecked('check2')">âœ“ å¤šé€‰é¢˜ä¸è‡ªåŠ¨è·³è½¬</button>
                <button class="button" onclick="markChecked('check3')">âœ“ å¤šé€‰é¢˜å¯å¤šé€‰</button>
                <button class="button" onclick="markChecked('check4')">âœ“ å¤šé€‰é¢˜æ‰‹åŠ¨è·³è½¬</button>
                <button class="button" onclick="markChecked('check5')">âœ“ ç›´æ¥æ˜¾ç¤ºé˜²åˆ·éªŒè¯</button>
                <button class="button" onclick="markChecked('check6')">âœ“ æ— æäº¤æ–¹å¼é€‰æ‹©</button>
                <button class="button" onclick="markChecked('check7')">âœ“ é˜²åˆ·éªŒè¯æˆåŠŸ</button>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ” è¯¦ç»†æµ‹è¯•æŒ‡å—</h3>
            <div>
                <h4>æµ‹è¯•å¤šé€‰é¢˜è¡Œä¸ºï¼š</h4>
                <ol>
                    <li>æ‰¾åˆ°ä¸€ä¸ªå¤šé€‰é¢˜ï¼ˆcheckboxç±»å‹ï¼‰</li>
                    <li>ç‚¹å‡»ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼Œè§‚å¯Ÿæ˜¯å¦è‡ªåŠ¨è·³è½¬ï¼ˆåº”è¯¥ä¸è·³è½¬ï¼‰</li>
                    <li>å†ç‚¹å‡»ç¬¬äºŒä¸ªé€‰é¡¹ï¼Œç¡®è®¤å¯ä»¥å¤šé€‰</li>
                    <li>ç‚¹å‡»"ä¸‹ä¸€é¢˜"æŒ‰é’®ï¼Œç¡®è®¤å¯ä»¥æ‰‹åŠ¨è·³è½¬</li>
                </ol>
                
                <h4>æµ‹è¯•é˜²åˆ·éªŒè¯ï¼š</h4>
                <ol>
                    <li>å®Œæˆæ‰€æœ‰é—®é¢˜ç›´åˆ°æœ€åä¸€é¢˜</li>
                    <li>å›ç­”æœ€åä¸€é¢˜åï¼Œåº”è¯¥ç›´æ¥å¼¹å‡ºé˜²åˆ·éªŒè¯çª—å£</li>
                    <li>ä¸åº”è¯¥æ˜¾ç¤º"æ‚¨å¸Œæœ›å¦‚ä½•æäº¤è¿™ä»½é—®å·ï¼Ÿ"çš„é¡µé¢</li>
                    <li>åœ¨éªŒè¯çª—å£ä¸­é€‰æ‹©æ­£ç¡®çš„æ•°å­—</li>
                    <li>éªŒè¯æˆåŠŸååº”è¯¥è·³è½¬åˆ°å®Œæˆé¡µé¢</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        const output = document.getElementById('output');
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            output.textContent += `[${timestamp}] ${message}\n`;
            output.scrollTop = output.scrollHeight;
        }

        function openQuestionnaire() {
            log('ğŸ”— æ­£åœ¨æ‰“å¼€é—®å·é¡µé¢...');
            window.open('http://localhost:5175/questionnaire-v2/survey', '_blank');
            log('âœ… é—®å·é¡µé¢å·²åœ¨æ–°çª—å£æ‰“å¼€');
            log('ğŸ“‹ è¯·æŒ‰ç…§æµ‹è¯•æ¸…å•è¿›è¡Œæ‰‹åŠ¨éªŒè¯');
        }

        function startTest() {
            log('ğŸ§ª å¼€å§‹è‡ªåŠ¨éªŒè¯æµ‹è¯•...');
            
            // æ£€æŸ¥å‰ç«¯æœåŠ¡
            fetch('http://localhost:5175/questionnaire-v2/survey')
                .then(response => {
                    if (response.ok) {
                        log('âœ… å‰ç«¯æœåŠ¡æ­£å¸¸');
                        return response.text();
                    } else {
                        throw new Error(`HTTP ${response.status}`);
                    }
                })
                .then(html => {
                    if (html.includes('questionnaire') || html.includes('é—®å·')) {
                        log('âœ… é—®å·é¡µé¢å†…å®¹æ­£å¸¸');
                    } else {
                        log('âŒ é—®å·é¡µé¢å†…å®¹å¼‚å¸¸');
                    }
                })
                .catch(error => {
                    log(`âŒ å‰ç«¯æœåŠ¡è¿æ¥å¤±è´¥: ${error.message}`);
                });

            // æ£€æŸ¥åç«¯API
            fetch('http://localhost:53389/api/universal-questionnaire/submit', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    questionnaireId: 'employment-survey-2024',
                    sectionResponses: [{
                        sectionId: 'test',
                        questionResponses: [{ questionId: 'test', value: 'test' }]
                    }],
                    metadata: {
                        participantGroup: 'test',
                        startedAt: new Date().toISOString(),
                        responseTimeSeconds: 1,
                        userAgent: 'Test'
                    }
                })
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    log('âœ… åç«¯APIæ­£å¸¸');
                } else {
                    log(`âŒ åç«¯APIé”™è¯¯: ${result.message}`);
                }
            })
            .catch(error => {
                log(`âŒ åç«¯APIè¿æ¥å¤±è´¥: ${error.message}`);
            });

            log('ğŸ è‡ªåŠ¨æµ‹è¯•å®Œæˆï¼Œè¯·ç»§ç»­æ‰‹åŠ¨éªŒè¯');
        }

        function markChecked(checkId) {
            const item = document.getElementById(checkId);
            if (item) {
                item.classList.add('checked');
                log(`âœ… æ ‡è®°å®Œæˆ: ${item.textContent}`);
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            log('ğŸ¯ ä¿®å¤éªŒè¯é¡µé¢å·²åŠ è½½');
            log('ğŸ“‹ è¯·æŒ‰ç…§æ­¥éª¤è¿›è¡ŒéªŒè¯');
            log('');
        };
    </script>
</body>
</html>
