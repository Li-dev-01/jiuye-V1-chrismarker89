# é—®å·2é›†æˆé—®å·1å¯è§†åŒ–ç³»ç»Ÿå®æ–½æ–¹æ¡ˆ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**ç›®æ ‡**: ä¸ºé—®å·2å®ç°é—®å·1çš„6ç»´åº¦å…¨é¢åˆ†ææ¡†æ¶ï¼Œä½¿ä¸¤å¥—å¯è§†åŒ–ç³»ç»Ÿå¹¶å­˜
**ç­–ç•¥**: ä¿æŒé—®å·2ç‰¹è‰²åŠŸèƒ½çš„åŒæ—¶ï¼Œå¢åŠ é—®å·1çš„é€šç”¨åˆ†æèƒ½åŠ›
**é¢„æœŸæ•ˆæœ**: é—®å·2æ—¢æœ‰ä¸“ä¸šç‰¹è‰²åˆ†æï¼Œåˆæœ‰å…¨é¢çš„æ•°æ®å±•ç¤ºèƒ½åŠ›

---

## ğŸ¯ æ ¸å¿ƒéœ€æ±‚åˆ†æ

### å½“å‰çŠ¶å†µ
- **é—®å·2ç°æœ‰**: 3ç»´åº¦ä¸“ä¸šåˆ†æï¼ˆç»æµå‹åŠ›ã€å°±ä¸šä¿¡å¿ƒã€ç°ä»£è´Ÿå€ºï¼‰
- **é—®å·1ä¼˜åŠ¿**: 6ç»´åº¦å…¨é¢æ¡†æ¶ï¼ˆå°±ä¸šå½¢åŠ¿ã€äººå£ç»“æ„ã€å¸‚åœºåˆ†æã€å°±ä¸šå‡†å¤‡ã€ç”Ÿæ´»æˆæœ¬ã€æ”¿ç­–æ´å¯Ÿï¼‰
- **ç”¨æˆ·éœ€æ±‚**: æ—¢è¦ä¸“ä¸šæ·±åº¦ï¼Œåˆè¦å…¨é¢è¦†ç›–

### é›†æˆç›®æ ‡
1. **ä¿ç•™é—®å·2ç‰¹è‰²**: ç°ä»£è´Ÿå€ºåˆ†æã€å°±ä¸šä¿¡å¿ƒæŒ‡æ•°ç­‰åˆ›æ–°åŠŸèƒ½
2. **å¢åŠ é—®å·1æ¡†æ¶**: 6ç»´åº¦å…¨é¢åˆ†æå±•ç¤º
3. **ç»Ÿä¸€ç”¨æˆ·ä½“éªŒ**: æ— ç¼åˆ‡æ¢ä¸¤ç§åˆ†ææ¨¡å¼
4. **æ•°æ®æºç»Ÿä¸€**: åŸºäºé—®å·2æ•°æ®å®ç°é—®å·1é£æ ¼çš„åˆ†æ

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡æ–¹æ¡ˆ

### æ•´ä½“æ¶æ„
```
é—®å·2å¯è§†åŒ–ç³»ç»Ÿ (Enhanced)
â”œâ”€â”€ ä¸“ä¸šåˆ†ææ¨¡å¼ (é—®å·2ç‰¹è‰²)
â”‚   â”œâ”€â”€ ç»æµå‹åŠ›åˆ†æ
â”‚   â”œâ”€â”€ å°±ä¸šä¿¡å¿ƒæŒ‡æ•°  
â”‚   â””â”€â”€ ç°ä»£è´Ÿå€ºåˆ†æ
â”œâ”€â”€ å…¨é¢åˆ†ææ¨¡å¼ (é—®å·1æ¡†æ¶)
â”‚   â”œâ”€â”€ å°±ä¸šå½¢åŠ¿æ€»è§ˆ
â”‚   â”œâ”€â”€ äººå£ç»“æ„åˆ†æ
â”‚   â”œâ”€â”€ å°±ä¸šå¸‚åœºæ·±åº¦åˆ†æ
â”‚   â”œâ”€â”€ å­¦ç”Ÿå°±ä¸šå‡†å¤‡
â”‚   â”œâ”€â”€ ç”Ÿæ´»æˆæœ¬ä¸å‹åŠ›
â”‚   â””â”€â”€ æ”¿ç­–æ´å¯Ÿä¸å»ºè®®
â””â”€â”€ ç»Ÿä¸€æ•°æ®æœåŠ¡å±‚
    â”œâ”€â”€ é—®å·2åŸå§‹æ•°æ®
    â”œâ”€â”€ æ•°æ®è½¬æ¢é€‚é…å™¨
    â””â”€â”€ åŒæ¨¡å¼æ•°æ®æä¾›
```

### æŠ€æœ¯æ¶æ„å±‚æ¬¡

#### 1. å±•ç¤ºå±‚ (Presentation Layer)
```typescript
SecondQuestionnaireAnalyticsPage.tsx (ä¸»é¡µé¢)
â”œâ”€â”€ AnalysisModeSelector (åˆ†ææ¨¡å¼é€‰æ‹©å™¨)
â”œâ”€â”€ SpecializedAnalysisView (ä¸“ä¸šåˆ†æè§†å›¾ - é—®å·2ç‰¹è‰²)
â”œâ”€â”€ ComprehensiveAnalysisView (å…¨é¢åˆ†æè§†å›¾ - é—®å·1æ¡†æ¶)
â””â”€â”€ SharedComponents (å…±äº«ç»„ä»¶)
    â”œâ”€â”€ UniversalChart
    â”œâ”€â”€ DataInsightCard
    â””â”€â”€ StatisticsSummary
```

#### 2. æœåŠ¡å±‚ (Service Layer)
```typescript
HybridVisualizationService (æ··åˆå¯è§†åŒ–æœåŠ¡)
â”œâ”€â”€ questionnaire2VisualizationService (ç°æœ‰ä¸“ä¸šæœåŠ¡)
â”œâ”€â”€ questionnaire1StyleAdapter (é—®å·1é£æ ¼é€‚é…å™¨)
â”œâ”€â”€ dataTransformationService (æ•°æ®è½¬æ¢æœåŠ¡)
â””â”€â”€ unifiedDataProvider (ç»Ÿä¸€æ•°æ®æä¾›è€…)
```

#### 3. æ•°æ®å±‚ (Data Layer)
```typescript
é—®å·2æ•°æ®æº
â”œâ”€â”€ API: /api/universal-questionnaire/statistics/questionnaire-v2-2024
â”œâ”€â”€ åŸå§‹æ•°æ®ç»“æ„ (ç»æµå‹åŠ›ã€å°±ä¸šä¿¡å¿ƒã€ç°ä»£è´Ÿå€º)
â””â”€â”€ è½¬æ¢åæ•°æ®ç»“æ„ (é€‚é…é—®å·1çš„6ç»´åº¦æ¡†æ¶)
```

---

## ğŸ“Š æ•°æ®æ˜ å°„ç­–ç•¥

### é—®å·2æ•°æ® â†’ é—®å·1æ¡†æ¶æ˜ å°„

#### 1. å°±ä¸šå½¢åŠ¿æ€»è§ˆ
```typescript
// ä»é—®å·2æ•°æ®æå–å°±ä¸šç›¸å…³ä¿¡æ¯
employmentOverview: {
  currentStatus: extractFromConfidenceData(),
  difficultyPerception: calculateFromPressureData(),
  salaryLevel: deriveFromDebtData()
}
```

#### 2. äººå£ç»“æ„åˆ†æ
```typescript
// åŸºäºé—®å·2çš„åŸºç¡€äººå£ç»Ÿè®¡æ•°æ®
demographics: {
  ageDistribution: questionnaire2Data.demographics.age,
  genderDistribution: questionnaire2Data.demographics.gender,
  educationLevel: questionnaire2Data.demographics.education
}
```

#### 3. å°±ä¸šå¸‚åœºæ·±åº¦åˆ†æ
```typescript
// ç»“åˆå°±ä¸šä¿¡å¿ƒå’Œç»æµå‹åŠ›æ•°æ®
marketAnalysis: {
  industryDistribution: inferFromConfidenceData(),
  salaryAnalysis: calculateFromDebtRatio(),
  jobSearchSituation: deriveFromPressureLevel()
}
```

#### 4. å­¦ç”Ÿå°±ä¸šå‡†å¤‡
```typescript
// ä»å°±ä¸šä¿¡å¿ƒæ•°æ®æ¨å¯¼å‡†å¤‡ç¨‹åº¦
preparedness: {
  internshipExperience: inferFromConfidenceLevel(),
  skillPreparation: calculateFromMarketConfidence(),
  careerPlanning: deriveFromLongTermConfidence()
}
```

#### 5. ç”Ÿæ´»æˆæœ¬ä¸å‹åŠ›
```typescript
// ç›´æ¥ä½¿ç”¨é—®å·2çš„ç»æµå‹åŠ›æ•°æ®
livingCosts: {
  housingExpenditure: questionnaire2Data.economicPressure.housing,
  economicPressure: questionnaire2Data.economicPressure.level,
  qualityOfLife: calculateFromDebtBurden()
}
```

#### 6. æ”¿ç­–æ´å¯Ÿä¸å»ºè®®
```typescript
// åŸºäºç»¼åˆæ•°æ®ç”Ÿæˆæ”¿ç­–å»ºè®®
policyInsights: {
  policyEffectiveness: analyzeFromTrendData(),
  trainingNeeds: identifyFromSkillGaps(),
  improvementSuggestions: generateFromPainPoints()
}
```

---

## ğŸ¨ ç”¨æˆ·ç•Œé¢è®¾è®¡

### ä¸»ç•Œé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é—®å·2æ•°æ®åˆ†æ - åŒæ¨¡å¼å¯è§†åŒ–ç³»ç»Ÿ                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ä¸“ä¸šåˆ†æ] [å…¨é¢åˆ†æ] [å¯¹æ¯”è§†å›¾] [æ•°æ®å¯¼å‡º]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ä¸“ä¸šåˆ†ææ¨¡å¼ (é—®å·2ç‰¹è‰²)                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ â”‚ ç»æµå‹åŠ›åˆ†æ â”‚ â”‚ å°±ä¸šä¿¡å¿ƒæŒ‡æ•° â”‚ â”‚ ç°ä»£è´Ÿå€ºåˆ†æ â”‚              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                             â”‚
â”‚ å…¨é¢åˆ†ææ¨¡å¼ (é—®å·1æ¡†æ¶)                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ â”‚å°±ä¸šå½¢åŠ¿  â”‚ â”‚äººå£ç»“æ„  â”‚ â”‚å¸‚åœºåˆ†æ  â”‚ â”‚å°±ä¸šå‡†å¤‡  â”‚              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚ â”‚ç”Ÿæ´»æˆæœ¬  â”‚ â”‚æ”¿ç­–æ´å¯Ÿ  â”‚                                     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å¼åˆ‡æ¢è®¾è®¡
```typescript
// åˆ†ææ¨¡å¼é€‰æ‹©å™¨ç»„ä»¶
const AnalysisModeSelector = () => {
  const [mode, setMode] = useState<'specialized' | 'comprehensive' | 'comparison'>('specialized');
  
  return (
    <Segmented
      options={[
        { label: 'ä¸“ä¸šåˆ†æ', value: 'specialized', icon: <RiseOutlined /> },
        { label: 'å…¨é¢åˆ†æ', value: 'comprehensive', icon: <BarChartOutlined /> },
        { label: 'å¯¹æ¯”è§†å›¾', value: 'comparison', icon: <SwapOutlined /> }
      ]}
      value={mode}
      onChange={setMode}
    />
  );
};
```

---

## ğŸ”§ æŠ€æœ¯å®æ–½è®¡åˆ’

### é˜¶æ®µ1: åŸºç¡€æ¶æ„æ­å»º (1-2å‘¨)

#### 1.1 åˆ›å»ºæ··åˆå¯è§†åŒ–æœåŠ¡
```typescript
// æ–‡ä»¶: frontend/src/services/hybridVisualizationService.ts
export class HybridVisualizationService {
  private questionnaire2Service = questionnaire2VisualizationService;
  private questionnaire1Adapter = new Questionnaire1StyleAdapter();
  
  async getSpecializedAnalysis() {
    return await this.questionnaire2Service.getVisualizationSummary();
  }
  
  async getComprehensiveAnalysis() {
    const q2Data = await this.questionnaire2Service.getVisualizationSummary();
    return await this.questionnaire1Adapter.transformToQ1Format(q2Data);
  }
}
```

#### 1.2 åˆ›å»ºæ•°æ®è½¬æ¢é€‚é…å™¨
```typescript
// æ–‡ä»¶: frontend/src/services/questionnaire1StyleAdapter.ts
export class Questionnaire1StyleAdapter {
  transformToQ1Format(q2Data: Questionnaire2VisualizationSummary): Q1StyleData {
    return {
      employmentOverview: this.mapToEmploymentOverview(q2Data),
      demographics: this.mapToDemographics(q2Data),
      marketAnalysis: this.mapToMarketAnalysis(q2Data),
      preparedness: this.mapToPreparedness(q2Data),
      livingCosts: this.mapToLivingCosts(q2Data),
      policyInsights: this.mapToPolicyInsights(q2Data)
    };
  }
}
```

### é˜¶æ®µ2: ç•Œé¢ç»„ä»¶å¼€å‘ (2-3å‘¨)

#### 2.1 é‡æ„ä¸»é¡µé¢ç»„ä»¶
```typescript
// æ–‡ä»¶: frontend/src/pages/SecondQuestionnaireAnalyticsPage.tsx
const SecondQuestionnaireAnalyticsPage = () => {
  const [analysisMode, setAnalysisMode] = useState<AnalysisMode>('specialized');
  const [specializedData, setSpecializedData] = useState(null);
  const [comprehensiveData, setComprehensiveData] = useState(null);
  
  return (
    <Layout>
      <AnalysisModeSelector mode={analysisMode} onChange={setAnalysisMode} />
      
      {analysisMode === 'specialized' && (
        <SpecializedAnalysisView data={specializedData} />
      )}
      
      {analysisMode === 'comprehensive' && (
        <ComprehensiveAnalysisView data={comprehensiveData} />
      )}
      
      {analysisMode === 'comparison' && (
        <ComparisonAnalysisView 
          specializedData={specializedData}
          comprehensiveData={comprehensiveData}
        />
      )}
    </Layout>
  );
};
```

#### 2.2 åˆ›å»ºå…¨é¢åˆ†æè§†å›¾ç»„ä»¶
```typescript
// æ–‡ä»¶: frontend/src/components/ComprehensiveAnalysisView.tsx
const ComprehensiveAnalysisView = ({ data }: { data: Q1StyleData }) => {
  return (
    <Tabs type="card">
      <TabPane tab="å°±ä¸šå½¢åŠ¿æ€»è§ˆ" key="employment">
        <EmploymentOverviewCharts data={data.employmentOverview} />
      </TabPane>
      <TabPane tab="äººå£ç»“æ„åˆ†æ" key="demographics">
        <DemographicsCharts data={data.demographics} />
      </TabPane>
      {/* å…¶ä»–ç»´åº¦... */}
    </Tabs>
  );
};
```

### é˜¶æ®µ3: æ•°æ®æ˜ å°„å®ç° (2-3å‘¨)

#### 3.1 å®ç°å…·ä½“çš„æ•°æ®è½¬æ¢é€»è¾‘
```typescript
// ç¤ºä¾‹: å°±ä¸šå½¢åŠ¿æ€»è§ˆæ•°æ®è½¬æ¢
mapToEmploymentOverview(q2Data: Questionnaire2VisualizationSummary) {
  const confidenceData = q2Data.dimensions.find(d => 
    d.dimensionId === 'employment-confidence-analysis-v2'
  );
  
  const pressureData = q2Data.dimensions.find(d => 
    d.dimensionId === 'economic-pressure-analysis-v2'
  );
  
  return {
    currentStatus: this.deriveEmploymentStatus(confidenceData),
    difficultyPerception: this.calculateDifficulty(pressureData),
    salaryLevel: this.estimateSalaryLevel(pressureData)
  };
}
```

### é˜¶æ®µ4: é›†æˆæµ‹è¯•ä¸ä¼˜åŒ– (1-2å‘¨)

#### 4.1 ç«¯åˆ°ç«¯æµ‹è¯•
- æ•°æ®è½¬æ¢å‡†ç¡®æ€§æµ‹è¯•
- ç•Œé¢åˆ‡æ¢æµç•…æ€§æµ‹è¯•
- æ€§èƒ½ä¼˜åŒ–æµ‹è¯•

#### 4.2 ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- åŠ è½½çŠ¶æ€ä¼˜åŒ–
- é”™è¯¯å¤„ç†å®Œå–„
- å“åº”å¼è®¾è®¡é€‚é…

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### åŠŸèƒ½å¢å¼º
1. **åŒé‡ä»·å€¼**: æ—¢æœ‰ä¸“ä¸šæ·±åº¦åˆ†æï¼Œåˆæœ‰å…¨é¢æ•°æ®å±•ç¤º
2. **ç”¨æˆ·é€‰æ‹©**: æ ¹æ®éœ€æ±‚çµæ´»åˆ‡æ¢åˆ†ææ¨¡å¼
3. **æ•°æ®å¤ç”¨**: ä¸€å¥—æ•°æ®æºæ”¯æŒä¸¤ç§åˆ†ææ¡†æ¶
4. **ä½“éªŒç»Ÿä¸€**: ä¿æŒä¸€è‡´çš„è®¾è®¡è¯­è¨€å’Œäº¤äº’æ¨¡å¼

### æŠ€æœ¯ä¼˜åŠ¿
1. **æ¶æ„æ¸…æ™°**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
2. **æ€§èƒ½ä¼˜åŒ–**: æ•°æ®è½¬æ¢åœ¨å‰ç«¯è¿›è¡Œï¼Œå‡å°‘APIè°ƒç”¨
3. **å…¼å®¹æ€§å¥½**: ä¿æŒç°æœ‰é—®å·2åŠŸèƒ½å®Œå…¨ä¸å˜
4. **å¯æ‰©å±•**: æœªæ¥å¯ä»¥è½»æ¾æ·»åŠ æ›´å¤šåˆ†ææ¨¡å¼

### å•†ä¸šä»·å€¼
1. **å¸‚åœºè¦†ç›–**: åŒæ—¶æ»¡è¶³ä¸“ä¸šç”¨æˆ·å’Œé€šç”¨ç”¨æˆ·éœ€æ±‚
2. **ç«äº‰ä¼˜åŠ¿**: ç‹¬ç‰¹çš„åŒæ¨¡å¼åˆ†æèƒ½åŠ›
3. **ç”¨æˆ·ç²˜æ€§**: ä¸°å¯Œçš„åŠŸèƒ½å¢åŠ ç”¨æˆ·ä½¿ç”¨æ—¶é•¿
4. **å•†ä¸šåŒ–**: ä¸ºä¸åŒç”¨æˆ·ç¾¤ä½“æä¾›å·®å¼‚åŒ–æœåŠ¡

---

## â±ï¸ å®æ–½æ—¶é—´è¡¨

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | å…³é”®é‡Œç¨‹ç¢‘ |
|------|------|----------|------------|
| **é˜¶æ®µ1** | åŸºç¡€æ¶æ„æ­å»º | 1-2å‘¨ | æ··åˆæœåŠ¡å’Œé€‚é…å™¨å®Œæˆ |
| **é˜¶æ®µ2** | ç•Œé¢ç»„ä»¶å¼€å‘ | 2-3å‘¨ | åŒæ¨¡å¼ç•Œé¢å®Œæˆ |
| **é˜¶æ®µ3** | æ•°æ®æ˜ å°„å®ç° | 2-3å‘¨ | 6ç»´åº¦æ•°æ®è½¬æ¢å®Œæˆ |
| **é˜¶æ®µ4** | é›†æˆæµ‹è¯•ä¼˜åŒ– | 1-2å‘¨ | ç³»ç»Ÿå®Œæ•´é›†æˆæµ‹è¯• |
| **æ€»è®¡** | **å®Œæ•´å®æ–½** | **6-10å‘¨** | **åŒæ¨¡å¼ç³»ç»Ÿä¸Šçº¿** |

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- [ ] æ•°æ®è½¬æ¢å‡†ç¡®ç‡ > 95%
- [ ] é¡µé¢åˆ‡æ¢å“åº”æ—¶é—´ < 500ms
- [ ] ç³»ç»Ÿç¨³å®šæ€§ > 99.5%
- [ ] ä»£ç è¦†ç›–ç‡ > 80%

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- [ ] ç”¨æˆ·ç•Œé¢æ»¡æ„åº¦ > 4.5/5
- [ ] åŠŸèƒ½å®Œæ•´æ€§è¯„åˆ† > 4.0/5
- [ ] å­¦ä¹ æˆæœ¬è¯„ä¼° < 10åˆ†é’Ÿ
- [ ] é”™è¯¯ç‡ < 2%

### ä¸šåŠ¡æŒ‡æ ‡
- [ ] ç”¨æˆ·ä½¿ç”¨æ—¶é•¿å¢åŠ  > 30%
- [ ] åŠŸèƒ½ä½¿ç”¨è¦†ç›–ç‡ > 70%
- [ ] ç”¨æˆ·ç•™å­˜ç‡æå‡ > 20%
- [ ] å®¢æˆ·æ»¡æ„åº¦ > 4.2/5

---

## ğŸ’» è¯¦ç»†æŠ€æœ¯å®ç°

### æ ¸å¿ƒç»„ä»¶ä»£ç ç¤ºä¾‹

#### 1. æ··åˆå¯è§†åŒ–æœåŠ¡å®ç°
```typescript
// frontend/src/services/hybridVisualizationService.ts
import { questionnaire2VisualizationService } from './questionnaire2VisualizationService';
import { Questionnaire1StyleAdapter } from './questionnaire1StyleAdapter';

export interface AnalysisMode {
  type: 'specialized' | 'comprehensive' | 'comparison';
  label: string;
  description: string;
}

export interface HybridVisualizationData {
  specialized: Questionnaire2VisualizationSummary;
  comprehensive: Q1StyleVisualizationData;
  metadata: {
    dataSource: string;
    lastUpdated: string;
    transformationVersion: string;
  };
}

class HybridVisualizationService {
  private q2Service = questionnaire2VisualizationService;
  private q1Adapter = new Questionnaire1StyleAdapter();

  async getHybridData(): Promise<HybridVisualizationData> {
    // è·å–é—®å·2åŸå§‹æ•°æ®
    const specializedData = await this.q2Service.getVisualizationSummary();

    // è½¬æ¢ä¸ºé—®å·1é£æ ¼æ•°æ®
    const comprehensiveData = await this.q1Adapter.transformToQ1Format(specializedData);

    return {
      specialized: specializedData,
      comprehensive: comprehensiveData,
      metadata: {
        dataSource: 'questionnaire-v2-2024',
        lastUpdated: new Date().toISOString(),
        transformationVersion: '1.0.0'
      }
    };
  }

  async getSpecializedAnalysis() {
    const hybridData = await this.getHybridData();
    return hybridData.specialized;
  }

  async getComprehensiveAnalysis() {
    const hybridData = await this.getHybridData();
    return hybridData.comprehensive;
  }
}

export const hybridVisualizationService = new HybridVisualizationService();
```

#### 2. é—®å·1é£æ ¼é€‚é…å™¨å®ç°
```typescript
// frontend/src/services/questionnaire1StyleAdapter.ts
export interface Q1StyleVisualizationData {
  questionnaireId: string;
  title: string;
  totalResponses: number;
  completionRate: number;
  lastUpdated: string;
  keyInsights: string[];
  dimensions: Q1StyleDimensionData[];
}

export interface Q1StyleDimensionData {
  dimensionId: string;
  dimensionTitle: string;
  description: string;
  icon: string;
  totalResponses: number;
  completionRate: number;
  charts: Q1StyleChartData[];
}

export class Questionnaire1StyleAdapter {

  async transformToQ1Format(q2Data: Questionnaire2VisualizationSummary): Promise<Q1StyleVisualizationData> {
    return {
      questionnaireId: 'questionnaire-v2-2024-q1-style',
      title: 'é—®å·2æ•°æ® - å…¨é¢åˆ†æè§†å›¾',
      totalResponses: q2Data.totalResponses,
      completionRate: q2Data.completionRate,
      lastUpdated: q2Data.lastUpdated,
      keyInsights: this.generateQ1StyleInsights(q2Data),
      dimensions: [
        await this.mapToEmploymentOverview(q2Data),
        await this.mapToDemographics(q2Data),
        await this.mapToMarketAnalysis(q2Data),
        await this.mapToPreparedness(q2Data),
        await this.mapToLivingCosts(q2Data),
        await this.mapToPolicyInsights(q2Data)
      ]
    };
  }

  private async mapToEmploymentOverview(q2Data: Questionnaire2VisualizationSummary): Promise<Q1StyleDimensionData> {
    const confidenceDimension = q2Data.dimensions.find(d =>
      d.dimensionId === 'employment-confidence-analysis-v2'
    );

    return {
      dimensionId: 'employment-overview-from-q2',
      dimensionTitle: 'å°±ä¸šå½¢åŠ¿æ€»è§ˆ',
      description: 'åŸºäºå°±ä¸šä¿¡å¿ƒæ•°æ®åˆ†æçš„æ•´ä½“å°±ä¸šå½¢åŠ¿',
      icon: 'ğŸ“ˆ',
      totalResponses: q2Data.totalResponses,
      completionRate: 100,
      charts: [
        {
          questionId: 'current-employment-status',
          questionTitle: 'å½“å‰å°±ä¸šçŠ¶æ€åˆ†å¸ƒ',
          chartType: 'pie',
          data: this.deriveEmploymentStatusData(confidenceDimension),
          totalResponses: q2Data.totalResponses,
          lastUpdated: q2Data.lastUpdated
        },
        {
          questionId: 'employment-difficulty',
          questionTitle: 'å°±ä¸šéš¾åº¦æ„ŸçŸ¥',
          chartType: 'bar',
          data: this.deriveEmploymentDifficultyData(confidenceDimension),
          totalResponses: q2Data.totalResponses,
          lastUpdated: q2Data.lastUpdated
        }
      ]
    };
  }

  private deriveEmploymentStatusData(confidenceDimension: any): Array<{label: string, value: number, percentage: number}> {
    // åŸºäºå°±ä¸šä¿¡å¿ƒæ•°æ®æ¨å¯¼å°±ä¸šçŠ¶æ€
    // é«˜ä¿¡å¿ƒ -> å·²å°±ä¸š, ä¸­ç­‰ä¿¡å¿ƒ -> æ±‚èŒä¸­, ä½ä¿¡å¿ƒ -> å¾…ä¸š
    return [
      { label: 'å·²å°±ä¸š', value: 45, percentage: 45.0 },
      { label: 'æ±‚èŒä¸­', value: 35, percentage: 35.0 },
      { label: 'å¾…ä¸š', value: 20, percentage: 20.0 }
    ];
  }

  private deriveEmploymentDifficultyData(confidenceDimension: any): Array<{label: string, value: number, percentage: number}> {
    // åŸºäºä¿¡å¿ƒæŒ‡æ•°åæ¨å°±ä¸šéš¾åº¦æ„ŸçŸ¥
    return [
      { label: 'éå¸¸å›°éš¾', value: 25, percentage: 25.0 },
      { label: 'æ¯”è¾ƒå›°éš¾', value: 40, percentage: 40.0 },
      { label: 'ä¸€èˆ¬', value: 25, percentage: 25.0 },
      { label: 'æ¯”è¾ƒå®¹æ˜“', value: 10, percentage: 10.0 }
    ];
  }
}
```

#### 3. ä¸»é¡µé¢ç»„ä»¶é‡æ„
```typescript
// frontend/src/pages/SecondQuestionnaireAnalyticsPage.tsx
import React, { useState, useEffect } from 'react';
import { Layout, Segmented, Card, Spin, Alert } from 'antd';
import { RiseOutlined, BarChartOutlined, SwapOutlined } from '@ant-design/icons';
import { hybridVisualizationService } from '../services/hybridVisualizationService';
import { SpecializedAnalysisView } from '../components/SpecializedAnalysisView';
import { ComprehensiveAnalysisView } from '../components/ComprehensiveAnalysisView';
import { ComparisonAnalysisView } from '../components/ComparisonAnalysisView';

type AnalysisMode = 'specialized' | 'comprehensive' | 'comparison';

const SecondQuestionnaireAnalyticsPage: React.FC = () => {
  const [analysisMode, setAnalysisMode] = useState<AnalysisMode>('specialized');
  const [hybridData, setHybridData] = useState<any>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    loadHybridData();
  }, []);

  const loadHybridData = async () => {
    try {
      setLoading(true);
      const data = await hybridVisualizationService.getHybridData();
      setHybridData(data);
      setError(null);
    } catch (err) {
      setError('æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
      console.error('Failed to load hybrid data:', err);
    } finally {
      setLoading(false);
    }
  };

  const analysisOptions = [
    {
      label: 'ä¸“ä¸šåˆ†æ',
      value: 'specialized',
      icon: <RiseOutlined />,
      description: 'ç»æµå‹åŠ›ã€å°±ä¸šä¿¡å¿ƒã€ç°ä»£è´Ÿå€ºä¸“ä¸šåˆ†æ'
    },
    {
      label: 'å…¨é¢åˆ†æ',
      value: 'comprehensive',
      icon: <BarChartOutlined />,
      description: '6ç»´åº¦å…¨é¢å°±ä¸šå¸‚åœºåˆ†ææ¡†æ¶'
    },
    {
      label: 'å¯¹æ¯”è§†å›¾',
      value: 'comparison',
      icon: <SwapOutlined />,
      description: 'ä¸“ä¸šåˆ†æä¸å…¨é¢åˆ†æå¯¹æ¯”å±•ç¤º'
    }
  ];

  if (loading) {
    return (
      <div style={{ textAlign: 'center', padding: '100px 0' }}>
        <Spin size="large" />
        <p style={{ marginTop: 16 }}>æ­£åœ¨åŠ è½½æ•°æ®...</p>
      </div>
    );
  }

  if (error) {
    return (
      <Alert
        message="æ•°æ®åŠ è½½é”™è¯¯"
        description={error}
        type="error"
        showIcon
        style={{ margin: '50px' }}
      />
    );
  }

  return (
    <Layout style={{ padding: '24px', background: '#f5f5f5' }}>
      <Card style={{ marginBottom: 24 }}>
        <div style={{ marginBottom: 16 }}>
          <h2>é—®å·2æ•°æ®åˆ†æ - åŒæ¨¡å¼å¯è§†åŒ–ç³»ç»Ÿ</h2>
          <p>é€‰æ‹©åˆ†ææ¨¡å¼ï¼Œè·å–ä¸åŒç»´åº¦çš„æ•°æ®æ´å¯Ÿ</p>
        </div>

        <Segmented
          options={analysisOptions}
          value={analysisMode}
          onChange={(value) => setAnalysisMode(value as AnalysisMode)}
          size="large"
          style={{ marginBottom: 16 }}
        />

        <div style={{ fontSize: '14px', color: '#666' }}>
          {analysisOptions.find(opt => opt.value === analysisMode)?.description}
        </div>
      </Card>

      {analysisMode === 'specialized' && (
        <SpecializedAnalysisView data={hybridData?.specialized} />
      )}

      {analysisMode === 'comprehensive' && (
        <ComprehensiveAnalysisView data={hybridData?.comprehensive} />
      )}

      {analysisMode === 'comparison' && (
        <ComparisonAnalysisView
          specializedData={hybridData?.specialized}
          comprehensiveData={hybridData?.comprehensive}
        />
      )}
    </Layout>
  );
};

export default SecondQuestionnaireAnalyticsPage;
```

---

## ğŸ”„ æ•°æ®æµç¨‹å›¾

```mermaid
graph TD
    A[é—®å·2åŸå§‹æ•°æ®] --> B[hybridVisualizationService]
    B --> C[ä¸“ä¸šåˆ†ææ¨¡å¼]
    B --> D[æ•°æ®è½¬æ¢é€‚é…å™¨]
    D --> E[å…¨é¢åˆ†ææ¨¡å¼]
    C --> F[SpecializedAnalysisView]
    E --> G[ComprehensiveAnalysisView]
    F --> H[ç”¨æˆ·ç•Œé¢]
    G --> H

    I[ç”¨æˆ·é€‰æ‹©] --> J[AnalysisModeSelector]
    J --> K{åˆ†ææ¨¡å¼}
    K -->|ä¸“ä¸š| F
    K -->|å…¨é¢| G
    K -->|å¯¹æ¯”| L[ComparisonAnalysisView]
    L --> H
```

---

## ğŸ¯ å…³é”®æŠ€æœ¯å†³ç­–

### 1. æ•°æ®è½¬æ¢ç­–ç•¥
**å†³ç­–**: åœ¨å‰ç«¯è¿›è¡Œæ•°æ®è½¬æ¢ï¼Œè€Œä¸æ˜¯åç«¯
**ç†ç”±**:
- å‡å°‘APIå¼€å‘å·¥ä½œé‡
- æé«˜å“åº”é€Ÿåº¦
- ä¾¿äºè°ƒè¯•å’Œä¼˜åŒ–
- ä¿æŒåç«¯APIçš„ç®€æ´æ€§

### 2. ç»„ä»¶å¤ç”¨ç­–ç•¥
**å†³ç­–**: æœ€å¤§åŒ–å¤ç”¨ç°æœ‰ç»„ä»¶ï¼Œåˆ›å»ºé€‚é…å±‚
**ç†ç”±**:
- å‡å°‘å¼€å‘å·¥ä½œé‡
- ä¿æŒè®¾è®¡ä¸€è‡´æ€§
- é™ä½ç»´æŠ¤æˆæœ¬
- æé«˜å¼€å‘æ•ˆç‡

### 3. çŠ¶æ€ç®¡ç†ç­–ç•¥
**å†³ç­–**: ä½¿ç”¨React Hooks + Contextï¼Œé¿å…å¼•å…¥Redux
**ç†ç”±**:
- é¡¹ç›®è§„æ¨¡é€‚ä¸­
- å‡å°‘æŠ€æœ¯å¤æ‚åº¦
- æé«˜å¼€å‘æ•ˆç‡
- ä¾¿äºå›¢é˜Ÿç»´æŠ¤

---

## ğŸ“‹ å®æ–½æ£€æŸ¥æ¸…å•

### å¼€å‘é˜¶æ®µæ£€æŸ¥é¡¹

#### é˜¶æ®µ1: åŸºç¡€æ¶æ„ âœ…
- [ ] åˆ›å»º `hybridVisualizationService.ts`
- [ ] åˆ›å»º `questionnaire1StyleAdapter.ts`
- [ ] å®šä¹‰æ•°æ®æ¥å£å’Œç±»å‹
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

#### é˜¶æ®µ2: ç•Œé¢ç»„ä»¶ âœ…
- [ ] é‡æ„ `SecondQuestionnaireAnalyticsPage.tsx`
- [ ] åˆ›å»º `AnalysisModeSelector` ç»„ä»¶
- [ ] åˆ›å»º `ComprehensiveAnalysisView` ç»„ä»¶
- [ ] åˆ›å»º `ComparisonAnalysisView` ç»„ä»¶

#### é˜¶æ®µ3: æ•°æ®æ˜ å°„ âœ…
- [ ] å®ç°å°±ä¸šå½¢åŠ¿æ€»è§ˆæ˜ å°„
- [ ] å®ç°äººå£ç»“æ„åˆ†ææ˜ å°„
- [ ] å®ç°å°±ä¸šå¸‚åœºæ·±åº¦åˆ†ææ˜ å°„
- [ ] å®ç°å­¦ç”Ÿå°±ä¸šå‡†å¤‡æ˜ å°„
- [ ] å®ç°ç”Ÿæ´»æˆæœ¬ä¸å‹åŠ›æ˜ å°„
- [ ] å®ç°æ”¿ç­–æ´å¯Ÿä¸å»ºè®®æ˜ å°„

#### é˜¶æ®µ4: æµ‹è¯•ä¼˜åŒ– âœ…
- [ ] ç«¯åˆ°ç«¯åŠŸèƒ½æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–æµ‹è¯•
- [ ] ç”¨æˆ·ä½“éªŒæµ‹è¯•
- [ ] é”™è¯¯å¤„ç†æµ‹è¯•

### è´¨é‡ä¿è¯æ£€æŸ¥é¡¹

#### ä»£ç è´¨é‡ âœ…
- [ ] TypeScriptç±»å‹å®‰å…¨
- [ ] ESLintä»£ç è§„èŒƒæ£€æŸ¥
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] ä»£ç å®¡æŸ¥å®Œæˆ

#### ç”¨æˆ·ä½“éªŒ âœ…
- [ ] å“åº”å¼è®¾è®¡é€‚é…
- [ ] åŠ è½½çŠ¶æ€ä¼˜åŒ–
- [ ] é”™è¯¯æç¤ºå‹å¥½
- [ ] äº¤äº’æµç•…æ€§éªŒè¯

#### æ€§èƒ½æŒ‡æ ‡ âœ…
- [ ] é¦–å±åŠ è½½æ—¶é—´ < 2ç§’
- [ ] æ¨¡å¼åˆ‡æ¢å“åº”æ—¶é—´ < 500ms
- [ ] å†…å­˜ä½¿ç”¨ä¼˜åŒ–
- [ ] ç½‘ç»œè¯·æ±‚ä¼˜åŒ–

è¿™ä¸ªå®æ–½æ–¹æ¡ˆå°†ä¸ºé—®å·2æä¾›å¼ºå¤§çš„åŒæ¨¡å¼åˆ†æèƒ½åŠ›ï¼Œæ—¢ä¿æŒå…¶ä¸“ä¸šç‰¹è‰²ï¼Œåˆå¢åŠ å…¨é¢çš„æ•°æ®å±•ç¤ºåŠŸèƒ½ï¼Œå®ç°æœ€ä½³çš„ç”¨æˆ·ä½“éªŒå’Œå•†ä¸šä»·å€¼ã€‚
